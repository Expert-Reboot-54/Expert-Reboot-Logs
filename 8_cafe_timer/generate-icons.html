<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>アイコン生成ツール</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 2rem; background: #222; color: #fff; }
        canvas { border: 1px solid #555; margin: 1rem; }
        a { display: inline-block; margin: 1rem; padding: 0.8rem 2rem; background: #d4a574; color: #1a0e0a; text-decoration: none; border-radius: 8px; font-weight: bold; }
        a:hover { background: #e8c9a0; }
    </style>
</head>
<body>
    <h1>Cafe Timer アイコン生成</h1>
    <p>下のリンクを右クリック → 「名前を付けてリンク先を保存」で保存してください</p>
    <div>
        <canvas id="c192" width="192" height="192"></canvas>
        <canvas id="c512" width="512" height="512"></canvas>
    </div>
    <div>
        <a id="dl192" download="icon-192.png">icon-192.png をダウンロード</a>
        <a id="dl512" download="icon-512.png">icon-512.png をダウンロード</a>
    </div>
    <script>
        function drawIcon(canvas, size) {
            const ctx = canvas.getContext('2d');
            const s = size / 512; // scale factor

            // 背景（角丸）
            ctx.fillStyle = '#1a0e0a';
            ctx.beginPath();
            const r = 80 * s;
            ctx.moveTo(r, 0);
            ctx.lineTo(size - r, 0);
            ctx.quadraticCurveTo(size, 0, size, r);
            ctx.lineTo(size, size - r);
            ctx.quadraticCurveTo(size, size, size - r, size);
            ctx.lineTo(r, size);
            ctx.quadraticCurveTo(0, size, 0, size - r);
            ctx.lineTo(0, r);
            ctx.quadraticCurveTo(0, 0, r, 0);
            ctx.fill();

            // カップ本体
            const cx = size / 2;
            ctx.fillStyle = '#f5e6d3';
            ctx.strokeStyle = '#d4a574';
            ctx.lineWidth = 3 * s;
            const cupW = 180 * s, cupH = 220 * s;
            const cupX = cx - cupW / 2, cupY = 160 * s;
            roundRect(ctx, cupX, cupY, cupW, cupH, 16 * s);
            ctx.fill();
            ctx.stroke();

            // カフェラテの液体
            const grad = ctx.createLinearGradient(0, cupY + cupH * 0.4, 0, cupY + cupH);
            grad.addColorStop(0, '#d4a574');
            grad.addColorStop(1, '#6f4e37');
            ctx.fillStyle = grad;
            roundRect(ctx, cupX + 3 * s, cupY + cupH * 0.45, cupW - 6 * s, cupH * 0.52, 14 * s);
            ctx.fill();

            // ミルク層
            ctx.fillStyle = 'rgba(245,230,211,0.5)';
            roundRect(ctx, cupX + 3 * s, cupY + 10 * s, cupW - 6 * s, cupH * 0.38, 14 * s);
            ctx.fill();

            // 氷
            ctx.fillStyle = 'rgba(255,255,255,0.5)';
            ctx.strokeStyle = 'rgba(200,200,200,0.4)';
            ctx.lineWidth = 1.5 * s;
            roundRect(ctx, cx - 35 * s, cupY + 40 * s, 40 * s, 30 * s, 6 * s);
            ctx.fill(); ctx.stroke();
            roundRect(ctx, cx + 5 * s, cupY + 55 * s, 35 * s, 28 * s, 6 * s);
            ctx.fill(); ctx.stroke();

            // ストロー
            ctx.fillStyle = '#c0392b';
            roundRect(ctx, cx + 30 * s, 80 * s, 10 * s, 260 * s, 5 * s);
            ctx.fill();

            // カップのフチ
            ctx.fillStyle = '#f0d9b5';
            ctx.strokeStyle = '#d4a574';
            ctx.lineWidth = 3 * s;
            ctx.beginPath();
            ctx.ellipse(cx, cupY, cupW / 2 + 5 * s, 14 * s, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();

            // テキスト「9:00」
            ctx.fillStyle = '#d4a574';
            ctx.font = `bold ${60 * s}px "Segoe UI", sans-serif`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('9:00', cx, size - 60 * s);

            // ダウンロードリンク設定
            return canvas.toDataURL('image/png');
        }

        function roundRect(ctx, x, y, w, h, r) {
            ctx.beginPath();
            ctx.moveTo(x + r, y);
            ctx.lineTo(x + w - r, y);
            ctx.quadraticCurveTo(x + w, y, x + w, y + r);
            ctx.lineTo(x + w, y + h - r);
            ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
            ctx.lineTo(x + r, y + h);
            ctx.quadraticCurveTo(x, y + h, x, y + h - r);
            ctx.lineTo(x, y + r);
            ctx.quadraticCurveTo(x, y, x + r, y);
            ctx.closePath();
        }

        const url192 = drawIcon(document.getElementById('c192'), 192);
        const url512 = drawIcon(document.getElementById('c512'), 512);
        document.getElementById('dl192').href = url192;
        document.getElementById('dl512').href = url512;
    </script>
</body>
</html>
