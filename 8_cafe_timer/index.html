<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Cafe Study Timer - „Éù„É¢„Éâ„Éº„É≠</title>

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2c1810">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CafeTimer">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,500;0,600;0,700;1,500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Yu Gothic', 'Hiragino Sans', sans-serif;
            background: linear-gradient(135deg, #1a0e0a 0%, #2c1810 30%, #3d2317 60%, #1a0e0a 100%);
            min-height: 100vh;
            min-height: 100dvh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
            color: #f5e6d3;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }

        /* ===== „Éó„É´„Éà„Ç•„É™„Éï„É¨„ÉÉ„Ç∑„É• ===== */
        .ptr-indicator {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            height: 0;
            overflow: hidden;
            z-index: 100;
            background: linear-gradient(180deg, rgba(212,165,116,0.12) 0%, transparent 100%);
            transition: height 0.3s cubic-bezier(0.2, 0.8, 0.3, 1);
            pointer-events: none;
            padding-bottom: 8px;
        }

        .ptr-indicator.active {
            transition: none;
        }

        /* „Ç´„ÉÉ„Éó„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
        .ptr-cup {
            transition: transform 0.15s ease;
            transform: translateY(-10px) scale(0.8);
            opacity: 0.4;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
        }

        .ptr-indicator.active .ptr-cup {
            transition: none;
        }

        .ptr-indicator.ready .ptr-cup {
            animation: ptrBounce 0.4s ease;
        }

        .ptr-indicator.refreshing .ptr-cup {
            animation: ptrCupSpin 1s cubic-bezier(0.4, 0, 0.2, 1) infinite;
        }

        @keyframes ptrBounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-8px) scale(1.1); }
        }

        @keyframes ptrCupSpin {
            0% { transform: translateY(0) rotate(0deg) scale(1); }
            25% { transform: translateY(-4px) rotate(5deg) scale(1.05); }
            50% { transform: translateY(0) rotate(0deg) scale(1); }
            75% { transform: translateY(-4px) rotate(-5deg) scale(1.05); }
            100% { transform: translateY(0) rotate(0deg) scale(1); }
        }

        /* Ê∞¥Êª¥ */
        .ptr-drops {
            display: flex;
            gap: 12px;
            height: 16px;
            margin-top: 2px;
        }

        .ptr-drop {
            font-size: 0.6rem;
            opacity: 0;
            transform: translateY(-8px);
            transition: all 0.2s ease;
        }

        .ptr-indicator.ready .ptr-drop,
        .ptr-indicator.refreshing .ptr-drop {
            opacity: 0.7;
            animation: ptrDrip 0.8s ease-in-out infinite;
        }

        .ptr-drop:nth-child(1) { animation-delay: 0s; }
        .ptr-drop:nth-child(2) { animation-delay: 0.25s; }
        .ptr-drop:nth-child(3) { animation-delay: 0.5s; }

        @keyframes ptrDrip {
            0% { transform: translateY(-4px); opacity: 0.7; }
            100% { transform: translateY(8px); opacity: 0; }
        }

        /* „ÉÜ„Ç≠„Çπ„Éà */
        .ptr-text {
            font-size: 0.7rem;
            color: #a08060;
            margin-top: 2px;
            transition: color 0.2s ease;
            letter-spacing: 0.5px;
        }

        .ptr-indicator.ready .ptr-text {
            color: #d4a574;
        }

        .ptr-indicator.refreshing .ptr-text {
            color: #e8c9a0;
        }

        /* „Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº */
        .ptr-progress {
            width: 60px;
            height: 3px;
            background: rgba(255,255,255,0.06);
            border-radius: 2px;
            margin-top: 4px;
            overflow: hidden;
        }

        .ptr-progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #d4a574, #e8c9a0);
            border-radius: 2px;
            transition: width 0.1s linear;
        }

        .ptr-indicator.refreshing .ptr-progress-bar {
            width: 100% !important;
            animation: ptrProgressPulse 0.8s ease-in-out infinite;
        }

        @keyframes ptrProgressPulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* ===== ËÉåÊôØ„ÅÆ„Ç¢„Ç§„Çπ„Ç´„Éï„Çß„É©„ÉÜ„Ç¢„Ç§„Ç≥„É≥ ===== */
        .bg-latte {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 0;
            opacity: 0.06;
            pointer-events: none;
            animation: latteFloat 12s ease-in-out infinite;
        }

        @keyframes latteFloat {
            0%, 100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
            50% { transform: translate(-50%, -52%) scale(1.03) rotate(1deg); }
        }

        /* ÊµÆ„Åã„Å∂„Ç≥„Éº„Éí„ÉºË±Ü„ÅÆËÉåÊôØË£ÖÈ£æ */
        .coffee-bean {
            position: fixed;
            font-size: 1.5rem;
            opacity: 0.08;
            pointer-events: none;
            animation: beanDrift 20s linear infinite;
            z-index: 0;
        }

        @keyframes beanDrift {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.08; }
            90% { opacity: 0.08; }
            100% { transform: translateY(-10vh) rotate(720deg); opacity: 0; }
        }

        /* ÊπØÊ∞ó„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
        .steam-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -70%);
            z-index: 0;
            pointer-events: none;
        }

        .steam {
            position: absolute;
            width: 8px;
            height: 80px;
            background: linear-gradient(to top, rgba(255,255,255,0.04), transparent);
            border-radius: 50%;
            animation: steamRise 4s ease-out infinite;
            filter: blur(6px);
        }

        .steam:nth-child(1) { left: -20px; animation-delay: 0s; }
        .steam:nth-child(2) { left: 0px; animation-delay: 1.2s; }
        .steam:nth-child(3) { left: 20px; animation-delay: 2.4s; }

        @keyframes steamRise {
            0% { transform: translateY(0) scaleX(1); opacity: 0.5; }
            50% { transform: translateY(-60px) scaleX(2); opacity: 0.3; }
            100% { transform: translateY(-120px) scaleX(3); opacity: 0; }
        }

        /* ===== „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„Éä ===== */
        .container {
            position: relative;
            z-index: 1;
            text-align: center;
            padding: 0 2rem 2rem 2rem;
            max-width: 600px;
            width: 90%;
        }

        /* „Éò„ÉÉ„ÉÄ„ÉºÔºö„Çø„Ç§„Éà„É´„Å®„Ç≥„Éº„Éí„Éº„Ç¢„Ç§„Ç≥„É≥„ÇíÊ®™‰∏¶„Å≥ */
        .header-title-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            margin-bottom: 0.25rem;
            flex-wrap: nowrap;
            white-space: nowrap;
        }

        .header-icon {
            font-size: clamp(1.8rem, 5vw, 2.8rem);
            line-height: 1;
            flex-shrink: 0;
            animation: iconPulse 3s ease-in-out infinite;
        }

        @keyframes iconPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .header-title-row .title {
            margin-bottom: 0;
            white-space: nowrap;
            min-width: 0;
        }

        .title {
            font-family: 'Cormorant Garamond', 'Yu Mincho', 'Hiragino Mincho ProN', serif;
            /* „Çπ„Éû„ÉõÁ∏¶„Åß„ÇÇÂ§ß„Åç„ÇÅ„Å´Ôºà2rem„ÄúÔºâ„ÄÅÂπÖ„Å´Âøú„Åò„Å¶„Åï„Çâ„Å´Êã°Â§ß */
            font-size: clamp(2rem, 7vw, 3.2rem);
            font-weight: 600;
            margin-bottom: 0.3rem;
            background: linear-gradient(135deg, #d4a574 0%, #e8c9a0 40%, #f0d9b5 70%, #c4956a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 0.12em;
        }
        /* ÂπÖ480px‰ª•‰∏äÔºàÊ®™ÁîªÈù¢„Éª„Çø„Éñ„É¨„ÉÉ„Éà„Å™„Å©Ôºâ„Åß„Çø„Ç§„Éà„É´„Çí„Åï„Çâ„Å´Â§ß„Åç„Åè */
        @media (min-width: 480px) {
            .title {
                font-size: clamp(2.2rem, 6vw, 4.5rem);
            }
        }
        /* ÂπÖ768px‰ª•‰∏äÔºàPC„ÉªÂ§ßÁîªÈù¢Ôºâ„Åß„Åï„Çâ„Å´Â§ß„Åç„Åè */
        @media (min-width: 768px) {
            .title {
                font-size: clamp(2.5rem, 5vw, 5.5rem);
            }
        }

        .subtitle {
            font-size: clamp(0.85rem, 2vw, 1rem);
            color: #a08060;
            margin-bottom: 0.6rem;
            font-weight: 300;
            letter-spacing: 1px;
        }

        /* ===== „Çø„Ç§„Éû„ÉºË°®Á§∫ ===== */
        .timer-card {
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(20px);
            border-radius: 28px;
            border: 1px solid rgba(212, 165, 116, 0.15);
            box-shadow:
                0 20px 60px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            padding: 1rem 2rem 2.5rem 2rem;
            margin-bottom: 1.5rem;
            transition: all 0.5s ease;
        }

        .timer-card.warning {
            border-color: rgba(255, 160, 60, 0.4);
            box-shadow:
                0 20px 60px rgba(0, 0, 0, 0.4),
                0 0 40px rgba(255, 160, 60, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        /* ===== „Éù„É¢„Éâ„Éº„É≠Ôºà9_Pomodoro Áµ±ÂêàÔºâ ===== */
        .pomodoro-card.work-phase {
            border-color: rgba(255, 120, 100, 0.2);
        }
        .pomodoro-card.break-phase {
            border-color: rgba(100, 200, 130, 0.2);
        }

        .pomodoro-phase-label {
            font-size: 0.95rem;
            color: #d4a574;
            margin-bottom: 1rem;
        }
        .pomodoro-card.work-phase .pomodoro-phase-label {
            background: linear-gradient(135deg, #d4a574 0%, #e8c9a0 40%, #f0d9b5 70%, #c4956a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .pomodoro-card.break-phase .pomodoro-phase-label { color: #90e0a8; }

        .pomodoro-progress-wrap {
            width: 120px;
            height: 120px;
            margin: 0 auto 0.5rem;
        }

        .pomodoro-arrow-btn {
            display: block;
            width: 56px;
            height: 32px;
            margin: 0 auto 0.3rem;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(212, 165, 116, 0.25);
            border-radius: 10px;
            color: #d4a574;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            line-height: 1;
        }
        .pomodoro-arrow-btn:hover {
            background: rgba(212, 165, 116, 0.12);
            border-color: rgba(212, 165, 116, 0.4);
            transform: scale(1.08);
        }
        .pomodoro-arrow-btn:active {
            transform: scale(0.95);
        }
        .pomodoro-arrow-btn:disabled,
        .pomodoro-arrow-btn.disabled {
            opacity: 0.3;
            pointer-events: none;
        }
        .pomodoro-arrow-down {
            margin: 0.3rem auto 1rem;
        }
        .pomodoro-progress-ring {
            transform: rotate(-90deg);
        }
        .pomodoro-ring-bg {
            fill: none;
            stroke: rgba(255, 255, 255, 0.08);
            stroke-width: 8;
        }
        .pomodoro-ring-fill {
            fill: none;
            stroke: #d4a574;
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.5s linear;
        }
        .pomodoro-card.work-phase .pomodoro-ring-fill { stroke: #ff8080; }
        .pomodoro-card.break-phase .pomodoro-ring-fill { stroke: #80e0a0; }

        .below-timer-link {
            margin-top: 1rem;
            text-align: center;
        }
        .below-timer-link a {
            color: #a08060;
            text-decoration: none;
            font-size: 0.9rem;
        }
        .below-timer-link a:hover {
            color: #d4a574;
            text-decoration: underline;
        }

        /* Notion„Å´Ë®òÈå≤ÔºàÁõ¥Êé•Ë®òÈå≤„Éë„Éç„É´Ôºâ */
        .notion-record-panel {
            display: none;
            margin-top: 1rem;
            padding: 1.25rem;
            background: rgba(44, 24, 16, 0.6);
            backdrop-filter: blur(12px);
            border-radius: 16px;
            border: 1px solid rgba(212, 165, 116, 0.25);
            width: 100%;
        }
        .notion-record-panel.is-open {
            display: block;
        }
        .notion-record-panel label {
            display: block;
            font-size: 0.85rem;
            color: #c9a87a;
            margin-bottom: 0.5rem;
        }
        .notion-record-panel textarea {
            width: 100%;
            min-height: 240px;
            padding: 0.75rem 1rem;
            font-family: inherit;
            font-size: 0.95rem;
            line-height: 1.5;
            color: #2c1810;
            background: rgba(255, 248, 240, 0.95);
            border: 1px solid rgba(212, 165, 116, 0.4);
            border-radius: 10px;
            resize: vertical;
            margin-bottom: 0.75rem;
        }
        .notion-record-panel textarea::placeholder {
            color: #806040;
            opacity: 0.8;
        }
        .notion-record-panel textarea:focus {
            outline: none;
            border-color: #d4a574;
        }
        .notion-record-actions {
            display: flex;
            gap: 0.75rem;
            justify-content: flex-end;
        }
        .btn-close-panel {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            background: rgba(212, 165, 116, 0.2);
            color: #8a6542;
            border: 1px solid rgba(212, 165, 116, 0.4);
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s ease, color 0.2s ease;
        }
        .btn-close-panel:hover {
            background: rgba(212, 165, 116, 0.35);
            color: #2c1810;
        }
        .notion-record-panel .copy-hint {
            font-size: 0.75rem;
            color: #806040;
            margin-bottom: 0.5rem;
        }
        .btn-copy-panel {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            background: rgba(212, 165, 116, 0.25);
            color: #5c4028;
            border: 1px solid rgba(212, 165, 116, 0.4);
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s ease, color 0.2s ease;
        }
        .btn-copy-panel:hover {
            background: rgba(212, 165, 116, 0.4);
            color: #2c1810;
        }

        /* „Éù„É¢„Éâ„Éº„É≠Áî®„Éï„É™„ÉÉ„Éó„ÇØ„É≠„ÉÉ„ÇØ */
        .pomodoro-display {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            margin-bottom: 1.2rem;
        }
        .pomodoro-display .flip-group { display: flex; gap: 3px; }
        .pomodoro-display .flip-colon {
            font-size: clamp(3.85rem, 13.2vw, 6rem);
            font-weight: 800;
            padding: 0 4px;
            opacity: 0.8;
        }
        .pomodoro-card.work-phase .pomodoro-display .flip-colon {
            background: linear-gradient(135deg, #d4a574 0%, #e8c9a0 40%, #f0d9b5 70%, #c4956a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .pomodoro-card.break-phase .pomodoro-display .flip-colon { color: #90e0a8; }
        .pomodoro-display .flip-card {
            position: relative;
            width: clamp(3.6rem, 13.2vw, 6rem);
            height: clamp(5.3rem, 20vw, 8.65rem);
            background: linear-gradient(180deg, #2a1e14 0%, #231810 49.9%, #1e140c 50%, #1a100a 100%);
            border-radius: 8px;
            border: 1px solid rgba(212, 165, 116, 0.15);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.04);
            overflow: hidden;
            perspective: 300px;
        }
        .pomodoro-card.work-phase .pomodoro-display .flip-card {
            border-color: rgba(255, 120, 100, 0.2);
            background: linear-gradient(180deg, #3a1814 0%, #2e1210 49.9%, #26100c 50%, #1e0c0a 100%);
        }
        .pomodoro-card.break-phase .pomodoro-display .flip-card {
            border-color: rgba(100, 200, 130, 0.2);
            background: linear-gradient(180deg, #142a18 0%, #102214 49.9%, #0c1a10 50%, #081408 100%);
        }
        .pomodoro-display .flip-card::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 1px;
            background: rgba(0, 0, 0, 0.5);
            z-index: 5;
            transform: translateY(-0.5px);
        }
        .pomodoro-display .flip-current {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(4.2rem, 13.2vw, 6.6rem);
            font-weight: 800;
            color: #f5e6d3;
            font-variant-numeric: tabular-nums;
        }
        .pomodoro-card.work-phase .pomodoro-display .flip-current {
            background: linear-gradient(135deg, #d4a574 0%, #e8c9a0 40%, #f0d9b5 70%, #c4956a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .pomodoro-card.break-phase .pomodoro-display .flip-current { color: #90e0a8; }
        .pomodoro-display .flip-top {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            overflow: hidden;
            z-index: 10;
            transform-origin: bottom center;
            background: linear-gradient(180deg, #2a1e14 0%, #231810 100%);
            border-radius: 8px 8px 0 0;
            animation: flipDown 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97) forwards;
        }
        .pomodoro-card.work-phase .pomodoro-display .flip-top { background: linear-gradient(180deg, #3a1814 0%, #2e1210 100%); }
        .pomodoro-card.break-phase .pomodoro-display .flip-top { background: linear-gradient(180deg, #142a18 0%, #102214 100%); }
        .pomodoro-display .flip-top .flip-digit,
        .pomodoro-display .flip-bottom .flip-digit {
            position: absolute;
            width: 100%;
            height: 200%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(4.2rem, 13.2vw, 6.6rem);
            font-weight: 800;
            color: #f5e6d3;
            font-variant-numeric: tabular-nums;
        }
        .pomodoro-card.work-phase .pomodoro-display .flip-top .flip-digit,
        .pomodoro-card.work-phase .pomodoro-display .flip-bottom .flip-digit {
            background: linear-gradient(135deg, #d4a574 0%, #e8c9a0 40%, #f0d9b5 70%, #c4956a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .pomodoro-card.break-phase .pomodoro-display .flip-top .flip-digit,
        .pomodoro-card.break-phase .pomodoro-display .flip-bottom .flip-digit { color: #90e0a8; }
        .pomodoro-display .flip-bottom {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50%;
            overflow: hidden;
            z-index: 8;
            transform-origin: top center;
            background: linear-gradient(180deg, #1e140c 0%, #1a100a 100%);
            border-radius: 0 0 8px 8px;
            transform: rotateX(90deg);
            animation: flipUp 0.5s 0.25s cubic-bezier(0.36, 0.07, 0.19, 0.97) forwards;
        }
        .pomodoro-card.work-phase .pomodoro-display .flip-bottom { background: linear-gradient(180deg, #26100c 0%, #1e0c0a 100%); }
        .pomodoro-card.break-phase .pomodoro-display .flip-bottom { background: linear-gradient(180deg, #0c1a10 0%, #081408 100%); }
        .pomodoro-display .flip-bottom .flip-digit {
            top: -100%;
        }
        @keyframes flipDown {
            0% { transform: rotateX(0deg); }
            100% { transform: rotateX(-90deg); }
        }
        @keyframes flipUp {
            0% { transform: rotateX(90deg); }
            100% { transform: rotateX(0deg); }
        }

        /* ===== „É°„ÉÉ„Çª„Éº„Ç∏ ===== */
        .message-area {
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
        }

        .message {
            font-size: clamp(1rem, 2.5vw, 1.3rem);
            line-height: 1.8;
            padding: 1.2rem 2rem;
            background: rgba(255, 160, 60, 0.08);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(255, 160, 60, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            color: #ffd090;
            font-weight: 600;
            opacity: 0;
            transform: translateY(20px) scale(0.95);
            animation: messageAppear 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes messageAppear {
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .message.success {
            background: rgba(102, 187, 106, 0.1);
            border-color: rgba(102, 187, 106, 0.25);
            color: #a5d6a7;
        }

        /* ===== „Ç≥„É≥„Éà„É≠„Éº„É´„Éú„Çø„É≥ ===== */

        .btn {
            padding: 0.9rem 2.5rem;
            font-size: 1rem;
            font-weight: 600;
            color: #f5e6d3;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .btn-start {
            background: linear-gradient(135deg, #d4a574 0%, #a07050 100%);
            box-shadow: 0 8px 25px rgba(160, 112, 80, 0.3);
        }

        .btn-start:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(160, 112, 80, 0.4);
        }

        .btn-start:active {
            transform: translateY(-1px);
        }

        .btn-reset {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(212, 165, 116, 0.2);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-reset:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        /* ===== „Éâ„É™„É≥„ÇØÊÉÖÂ†± ===== */
        .drink-info {
            margin-top: 2rem;
            font-size: 0.85rem;
            color: #806040;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .drink-info .icon {
            font-size: 1.2rem;
        }

        /* ===== „Çø„Ç§„Éû„Éº„Ç´„Éº„ÉâÂÜÖ„Ç≥„É≥„Éà„É≠„Éº„É´ ===== */
        .controls-inline {
            display: flex;
            gap: 0.8rem;
            justify-content: center;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(212, 165, 116, 0.1);
        }

        .controls-inline .btn {
            padding: 0.6rem 1.8rem;
            font-size: 0.85rem;
        }

        /* ===== „Ç®„Éº„É´ ===== */
        .yell-area {
            min-height: 4.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.5rem;
        }

        .yell-message {
            font-size: clamp(0.85rem, 2vw, 1rem);
            line-height: 1.7;
            padding: 0.7rem 1.4rem;
            min-height: 3.4em;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: rgba(102, 126, 234, 0.08);
            backdrop-filter: blur(10px);
            border-radius: 14px;
            border: 1px solid rgba(102, 126, 234, 0.2);
            color: #b0c4ff;
            font-weight: 500;
            opacity: 0;
            transform: translateY(30px) scale(0.95);
            filter: blur(4px);
            animation: yellAppear 0.7s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        }

        @keyframes yellAppear {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
                filter: blur(4px);
            }
            60% {
                opacity: 1;
                filter: blur(0px);
            }
            80% {
                transform: translateY(-4px) scale(1.01);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0px);
            }
        }

        @keyframes yellDisappear {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0px);
            }
            100% {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
                filter: blur(4px);
            }
        }

        .yell-btn {
            background: none;
            border: 1px solid rgba(102, 126, 234, 0.25);
            color: #8898d0;
            font-size: 0.8rem;
            padding: 0.35rem 1.2rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.25s ease;
            margin-bottom: 0.8rem;
            letter-spacing: 1px;
            font-weight: 500;
        }

        .yell-btn:hover {
            background: rgba(102, 126, 234, 0.12);
            border-color: rgba(102, 126, 234, 0.45);
            color: #a0b4ee;
            transform: scale(1.05);
        }

        .yell-btn:active {
            transform: scale(0.96);
        }

        /* ===== „Çπ„ÉÜ„Éº„Çø„Çπ„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº ===== */
        .status {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.8rem;
            color: #806040;
            margin-bottom: 1.5rem;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #555;
            transition: background 0.3s ease;
        }

        .status-dot.active {
            background: #66bb6a;
            box-shadow: 0 0 10px rgba(102, 187, 106, 0.4);
            animation: dotBlink 2s ease-in-out infinite;
        }

        .status-dot.warning {
            background: #ffa03c;
            box-shadow: 0 0 10px rgba(255, 160, 60, 0.4);
            animation: dotBlink 1s ease-in-out infinite;
        }

        @keyframes dotBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }

        /* ===== ÊÆã„Çä0ÁßíÊôÇ„ÅÆËµ§ÁÇπÊªÖ„Ç™„Éº„Éê„Éº„É¨„Ç§ ===== */
        .zero-flash-overlay {
            position: fixed;
            inset: 0;
            background: rgba(180, 40, 40, 0.7);
            z-index: 9999;
            pointer-events: none;
            opacity: 0;
        }
        .zero-flash-overlay.flash {
            animation: zeroFlash 1.8s ease-out;
        }
        @keyframes zeroFlash {
            0% { opacity: 0; }
            15% { opacity: 0.75; }
            30% { opacity: 0.2; }
            45% { opacity: 0.6; }
            60% { opacity: 0.15; }
            75% { opacity: 0.4; }
            100% { opacity: 0; }
        }

        /* ===== „É¨„Çπ„Éù„É≥„Ç∑„Éñ ===== */
        @media (max-width: 480px) {
            .container {
                padding: 0 1.5rem 1.5rem 1.5rem;
            }
            .header-title-row .title {
                font-size: clamp(1.35rem, 5vw, 2rem);
            }
            .timer-card {
                padding: 1rem 1.5rem 2rem 1.5rem;
            }
            .controls-inline .btn {
                padding: 0.5rem 1.4rem;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>

    <!-- ÊÆã„Çä0ÁßíÊôÇ„ÅÆËµ§ÁÇπÊªÖÁî®„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
    <div class="zero-flash-overlay" id="zeroFlashOverlay" aria-hidden="true"></div>

    <!-- ËÉåÊôØ„Ç¢„Ç§„Çπ„Ç´„Éï„Çß„É©„ÉÜ SVG -->
    <div class="bg-latte">
        <svg width="420" height="560" viewBox="0 0 420 560" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- „Ç´„ÉÉ„ÉóÊú¨‰Ωì -->
            <rect x="100" y="140" width="220" height="320" rx="20" fill="#f5e6d3" stroke="#d4a574" stroke-width="3"/>
            <!-- „Ç´„ÉÉ„Éó„ÅÆÂ∫ï -->
            <ellipse cx="210" cy="460" rx="110" ry="15" fill="#e8c9a0" stroke="#d4a574" stroke-width="2"/>
            <!-- „Çπ„Éà„É≠„Éº -->
            <rect x="250" y="40" width="12" height="380" rx="6" fill="#c0392b" opacity="0.8"/>
            <rect x="245" y="40" width="22" height="30" rx="5" fill="#e74c3c" opacity="0.7"/>
            <!-- „Ç¢„Ç§„ÇπÔºàÊ∞∑Ôºâ -->
            <rect x="140" y="180" width="50" height="40" rx="8" fill="rgba(255,255,255,0.6)" stroke="rgba(200,200,200,0.4)" stroke-width="1.5"/>
            <rect x="200" y="200" width="45" height="35" rx="8" fill="rgba(255,255,255,0.5)" stroke="rgba(200,200,200,0.3)" stroke-width="1.5"/>
            <rect x="160" y="230" width="55" height="38" rx="8" fill="rgba(255,255,255,0.4)" stroke="rgba(200,200,200,0.3)" stroke-width="1.5"/>
            <rect x="220" y="250" width="40" height="30" rx="8" fill="rgba(255,255,255,0.5)" stroke="rgba(200,200,200,0.3)" stroke-width="1.5"/>
            <!-- „Ç´„Éï„Çß„É©„ÉÜ„ÅÆÊ∂≤‰ΩìÔºà„Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥Ôºâ -->
            <defs>
                <linearGradient id="latte" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="0%" stop-color="#d4a574" stop-opacity="0.3"/>
                    <stop offset="40%" stop-color="#c4956a" stop-opacity="0.5"/>
                    <stop offset="100%" stop-color="#6f4e37" stop-opacity="0.7"/>
                </linearGradient>
            </defs>
            <rect x="103" y="280" width="214" height="175" rx="18" fill="url(#latte)"/>
            <!-- „Éü„É´„ÇØ„ÅÆÂ±§ -->
            <rect x="103" y="160" width="214" height="125" rx="18" fill="rgba(245,230,211,0.3)"/>
            <!-- „Ç´„ÉÉ„Éó„ÅÆ„Éï„ÉÅ -->
            <ellipse cx="210" cy="142" rx="112" ry="18" fill="#f0d9b5" stroke="#d4a574" stroke-width="3"/>
            <!-- „Ç´„ÉÉ„Éó„ÅÆ„Éè„Ç§„É©„Ç§„Éà -->
            <rect x="115" y="170" width="8" height="200" rx="4" fill="rgba(255,255,255,0.08)"/>
            <!-- „É©„Éô„É´ -->
            <rect x="140" y="340" width="140" height="50" rx="10" fill="rgba(139,90,43,0.15)" stroke="rgba(139,90,43,0.2)" stroke-width="1"/>
            <text x="210" y="370" text-anchor="middle" fill="#8b5a2b" font-size="16" font-weight="600" opacity="0.4">ICED LATTE</text>
        </svg>
    </div>

    <!-- ÊπØÊ∞ó„Ç®„Éï„Çß„ÇØ„ÉàÔºà„Ç¢„Ç§„Çπ„Å™„ÅÆ„ÅßÊéß„Åà„ÇÅÔºâ -->
    <div class="steam-container" style="opacity: 0.3;">
        <div class="steam"></div>
        <div class="steam"></div>
        <div class="steam"></div>
    </div>

    <!-- „Éó„É´„Éà„Ç•„É™„Éï„É¨„ÉÉ„Ç∑„É• „Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº -->
    <div class="ptr-indicator" id="ptrIndicator">
        <div class="ptr-cup" id="ptrCup">
            <svg width="50" height="60" viewBox="0 0 50 60" fill="none">
                <rect x="8" y="12" width="34" height="42" rx="4" fill="#f5e6d3" stroke="#d4a574" stroke-width="2"/>
                <rect x="10" y="32" width="30" height="20" rx="3" fill="#c4956a" opacity="0.6"/>
                <rect x="10" y="16" width="30" height="18" rx="3" fill="rgba(245,230,211,0.5)"/>
                <ellipse cx="25" cy="13" rx="18" ry="4" fill="#f0d9b5" stroke="#d4a574" stroke-width="1.5"/>
                <rect x="30" y="4" width="4" height="38" rx="2" fill="#c0392b" opacity="0.7"/>
                <rect x="15" y="20" width="8" height="6" rx="2" fill="rgba(255,255,255,0.5)"/>
                <rect x="25" y="24" width="7" height="5" rx="2" fill="rgba(255,255,255,0.4)"/>
            </svg>
        </div>
        <div class="ptr-drops" id="ptrDrops">
            <span class="ptr-drop">üíß</span>
            <span class="ptr-drop">üíß</span>
            <span class="ptr-drop">üíß</span>
        </div>
        <span class="ptr-text" id="ptrText">Âºï„Å£Âºµ„Å£„Å¶Êõ¥Êñ∞</span>
        <div class="ptr-progress" id="ptrProgress">
            <div class="ptr-progress-bar" id="ptrProgressBar"></div>
        </div>
    </div>

    <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
    <div class="container">
        <div class="header-title-row">
            <span class="header-icon">‚òï</span>
            <h1 class="title">Cafe Study Timer</h1>
        </div>
        <p class="subtitle">„Ç´„Éï„Çß„Åß„Éù„É¢„Éâ„Éº„É≠ÈõÜ‰∏≠</p>

        <!-- „Ç®„Éº„É´Ë°®Á§∫„Ç®„É™„Ç¢ -->
        <div class="yell-area" id="yellArea">
            <div class="yell-message" id="yellMessage" style="display: none;"></div>
        </div>
        <button class="yell-btn" id="yellBtn">üì£ „Ç®„Éº„É´</button>

        <div class="status" id="statusArea">
            <span class="status-dot" id="statusDot"></span>
            <span id="statusText">ÂæÖÊ©ü‰∏≠</span>
        </div>

        <!-- „Éù„É¢„Éâ„Éº„É≠„Çø„Ç§„Éû„ÉºÔºà8_Cafe Timer ÂÜÖ„Å´ 9_Pomodoro „ÇíÁµ±ÂêàÔºâ -->
        <div class="timer-card pomodoro-card" id="timerCard">
            <p class="pomodoro-phase-label" id="phaseLabel">üçÖ ÈõÜ‰∏≠Ôºà25ÂàÜÔºâ</p>
            <div class="pomodoro-progress-wrap">
                <svg class="pomodoro-progress-ring" width="120" height="120" viewBox="0 0 120 120">
                    <circle class="pomodoro-ring-bg" cx="60" cy="60" r="55" />
                    <circle class="pomodoro-ring-fill" id="pomodoroProgressRing" cx="60" cy="60" r="55"
                        stroke-dasharray="346" stroke-dashoffset="0" />
                </svg>
            </div>
            <button class="pomodoro-arrow-btn pomodoro-arrow-up" id="pomodoroArrowUp" title="ÊôÇÈñì„ÇíÂ¢ó„ÇÑ„Åô">‚ñ≤</button>
            <div class="pomodoro-display" id="timerDisplay">
                <div class="flip-group">
                    <div class="flip-card" id="flipM1"><div class="flip-current">2</div></div>
                    <div class="flip-card" id="flipM2"><div class="flip-current">5</div></div>
                </div>
                <span class="flip-colon">:</span>
                <div class="flip-group">
                    <div class="flip-card" id="flipS1"><div class="flip-current">0</div></div>
                    <div class="flip-card" id="flipS2"><div class="flip-current">0</div></div>
                </div>
            </div>
            <button class="pomodoro-arrow-btn pomodoro-arrow-down" id="pomodoroArrowDown" title="ÊôÇÈñì„ÇíÊ∏õ„Çâ„Åô">‚ñº</button>
            <div class="controls-inline">
                <button class="btn btn-start" id="startBtn">‚ñ∂ „Çπ„Çø„Éº„Éà</button>
                <button class="btn btn-reset" id="resetBtn">‚Üª „É™„Çª„ÉÉ„Éà</button>
            </div>
        </div>

        <div class="below-timer-link">
            <a href="#" class="notion-open-link" id="notionLink" role="button">Notion</a>
            <div class="notion-record-panel" id="notionRecordPanel" aria-hidden="true">
                <label for="notionRecordInput">„É°„É¢Ôºà„Ç≥„Éî„Éº„Åó„Å¶Notion„Å´Ë≤º„Çä‰ªò„ÅëÔºâ</label>
                <p class="copy-hint">ÂÖ•Âäõ ‚Üí „Ç≥„Éî„Éº ‚Üí Notion„ÅÆÊâÄÂÆö„ÅÆÂàó„Å´Ë≤º„Çä‰ªò„Åë</p>
                <textarea id="notionRecordInput" rows="12" placeholder="ÂÖ•Âäõ„Åó„Å¶„Åã„Çâ„Ç≥„Éî„Éº‚Ä¶Ôºà‰ΩïË°å„Åß„ÇÇÂÖ•Âäõ„Åß„Åç„Åæ„ÅôÔºâ"></textarea>
                <div class="notion-record-actions">
                    <button type="button" class="btn-copy-panel" id="copyToClipboardBtn">üìã „Ç≥„Éî„Éº</button>
                    <button type="button" class="btn-close-panel" id="closeNotionPanel">Èñâ„Åò„Çã</button>
                </div>
            </div>
        </div>
        <div class="below-timer-link">
            <a href="../2_future-vision/index.html">Future Vision ‚Üí</a>
        </div>

        <div class="message-area" id="messageArea"></div>
    </div>

    <script>
        // ===== „Ç®„Éº„É´„É°„ÉÉ„Çª„Éº„Ç∏Ôºà7_„Ç®„Éº„É´„Çà„ÇäÔºâ =====
        const yellMessages = [
            "‰∏ÄÊ≠©ÂâçÈÄ≤ÔºÅÊú™Êù•„ÅÆËá™ÂàÜ„Åå‰ªä„ÅÆ„ÅÇ„Å™„Åü„Å´ÊÑüË¨ù„Åó„Å¶„ÅÑ„Çã„Åû",
            "55‰∏áÂÜÜ„ÅÆÊäïË≥á„ÅØ„ÄÅÊúÄÈ´ò„ÅÆÊú™Êù•„Å∏„ÅÆ„ÉÅ„Ç±„ÉÉ„Éà„Å†Ôºà30Âõû„ÅÆÊ≠©„Åø„Å®ÂÖ±„Å´Ôºâ",
            "ÊäÄË°ì„Åß‰ΩôÁôΩ„Çí„ÄÅ‰ªïÁµÑ„Åø„ÅßÊÑüË¨ù„Çí„ÄÇ",
            "ÂÆåÁíß‰∏ªÁæ©„ÇíÊç®„Å¶„Çç„ÄÇ70%ÈÅãÁî®„ÅßÁ∂ôÁ∂ö„Åô„Çã„Åì„Å®„ÅåÊúÄÂ§ß„ÅÆÂãùÂà©„Å†„ÄÇ",
            "„ÅÇ„Å™„Åü„ÅØ‰ªä„ÄÅAI„Çí‰Ωø„Çè„Çå„ÇãÂÅ¥„Åã„Çâ„Äé‰Ωø„ÅÑ„Åì„Å™„ÅôÂÅ¥„Äè„Å∏ÈÄ≤Âåñ„Åó„Åü„ÄÇ",
            "„Çø„Ç§„Éî„É≥„Ç∞Á∑¥ÁøíÂÆå‰∫ÜÔºÅ„ÅÇ„Å™„Åü„ÅÆÊåáÂÖà„ÅØAI„Å®ÂêåÊúü„ÅóÂßã„ÇÅ„Å¶„ÅÑ„Çã„ÄÇ",
            "54Ê≠≥„ÅØÁµÇ„Çè„Çä„Åò„ÇÉ„Å™„ÅÑ„ÄÇ„Åì„Åì„Åã„Çâ„ÅåÊú¨ÂΩì„ÅÆ„Çπ„Çø„Éº„Éà„Å†„ÄÇ",
            "‰∫∫Áîü100Âπ¥ÊôÇ‰ª£„ÄÇ„ÅÇ„Å™„Åü„Å´„ÅØ„Åæ„Å†46Âπ¥„ÇÇ„ÅÇ„ÇãÔºÅ",
            "ÈÅÖ„Åô„Åé„Çã„Åì„Å®„Å™„Å©‰Ωï„ÇÇ„Å™„ÅÑ„ÄÇ‰ªäÊó•„Åå‰∫∫Áîü„Åß‰∏ÄÁï™Ëã•„ÅÑÊó•„Å†„ÄÇ",
            "Âπ¥ÈΩ¢„ÅØÊï∞Â≠ó„Å´ÈÅé„Åé„Å™„ÅÑ„ÄÇÊÉÖÁÜ±„Åì„Åù„ÅåÂÖ®„Å¶„ÇíÊ±∫„ÇÅ„Çã„ÄÇ",
            "54Âπ¥Èñì„ÅÆÁµåÈ®ì„Åå„ÄÅ‰ªä„Åì„ÅùÊúÄÂº∑„ÅÆÊ≠¶Âô®„Å´„Å™„Çã„ÄÇ",
            "‰ªäÊó•„ÅÆ1„Ç≥„Éü„ÉÉ„Éà„Åå„ÄÅ1Âπ¥Âæå„ÅÆ1000„Ç≥„Éü„ÉÉ„Éà„Å´„Å™„Çã„ÄÇ",
            "Á∂ôÁ∂ö„ÅØÂ§©Êâç„ÇíË∂Ö„Åà„Çã„ÄÇ„ÅÇ„Å™„Åü„ÅØÊØéÊó•ÈÄ≤Âåñ„Åó„Å¶„ÅÑ„Çã„ÄÇ",
            "Â∞è„Åï„Å™Á©ç„ÅøÈáç„Å≠„Åå„ÄÅ„ÇÑ„Åå„Å¶Â§ß„Åç„Å™Â±±„Å´„Å™„Çã„ÄÇ",
            "1Êó•30ÂàÜ„ÅÆÂ≠¶Áøí„Åå„ÄÅ1Âπ¥„Åß182ÊôÇÈñì„ÅÆÊàêÈï∑„ÇíÁîü„ÇÄ„ÄÇ",
            "Êò®Êó•„Çà„Çä1%ÊàêÈï∑„Åô„Çå„Å∞„ÄÅ1Âπ¥Âæå„Å´„ÅØ37ÂÄç„Å´„Å™„Çã„ÄÇ",
            "„Ç≥„Éº„Éâ„ÅØÊõ∏„Åè„Åü„Å≥„Å´‰∏äÊâã„Åè„Å™„Çã„ÄÇ‰ªäÊó•„ÇÇ‰∏ÄË°å„ÄÅÊõ∏„Åì„ÅÜ„ÄÇ",
            "„Ç®„É©„Éº„ÅØÊàêÈï∑„ÅÆ„ÉÅ„É£„É≥„Çπ„ÄÇ„Éá„Éê„ÉÉ„Ç∞Âäõ„Åì„Åù„ÅåÁúü„ÅÆÂÆüÂäõ„Å†„ÄÇ",
            "Git„ÅÆ„Ç≥„Éü„ÉÉ„Éà„É≠„Ç∞„Åå„ÄÅ„ÅÇ„Å™„Åü„ÅÆÊàêÈï∑„ÅÆË®º„Å†„ÄÇ",
            "Èñ¢Êï∞„ÅåÁêÜËß£„Åß„Åç„ÅüÁû¨Èñì„ÄÅ‰∏ñÁïå„ÅåÂ∫É„Åå„Çã„ÄÇ",
            "CSS‰∏Ä„Å§„Éû„Çπ„Çø„Éº„Åô„Çã„Åî„Å®„Å´„ÄÅË°®ÁèæÂäõ„Åå10ÂÄç„Å´„Å™„Çã„ÄÇ",
            "AI„ÅØÊïµ„Åò„ÇÉ„Å™„ÅÑ„ÄÇÊúÄÈ´ò„ÅÆÁõ∏Ê£í„Å†„ÄÇ",
            "„Éó„É≠„É≥„Éó„Éà„ÇíÂà∂„Åô„ÇãËÄÖ„Åå„ÄÅAIÊôÇ‰ª£„ÇíÂà∂„Åô„Çã„ÄÇ",
            "„ÅÇ„Å™„Åü„ÅØ„ÇÇ„ÅÜ„ÄÅAI„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„Éà„Å∏„ÅÆÈÅì„ÇíÊ≠©„ÅçÂßã„ÇÅ„Å¶„ÅÑ„Çã„ÄÇ",
            "AI„Å´‰Ωø„Çè„Çå„Çã„Å™„ÄÇAI„Çí‰Ωø„ÅÑ„Åì„Å™„Åõ„ÄÇ",
            "‰∏çÂÆâ„ÅØÊàêÈï∑„ÅÆË®º„ÄÇÊÄñ„ÅÑ„Åã„Çâ„Åì„Åù„ÄÅ‰æ°ÂÄ§„Åå„ÅÇ„Çã„ÄÇ",
            "Â§±Êïó„ÇíÊÅê„Çå„Çã„Å™„ÄÇ„Åù„Çå„ÅØÊàêÂäü„Å∏„ÅÆÈÄöÈÅéÁÇπ„Å†„ÄÇ",
            "‰ªäÊó•„ÅÆ„ÉÅ„É£„É¨„É≥„Ç∏„Åå„ÄÅÊòéÊó•„ÅÆËá™‰ø°„Å´„Å™„Çã„ÄÇ",
            "„É™„Çπ„ÇØ„ÇíÂèñ„Çâ„Å™„ÅÑ„Åì„Å®„Åå„ÄÅÊúÄÂ§ß„ÅÆ„É™„Çπ„ÇØ„Å†„ÄÇ",
            "ÂãáÊ∞ó„Å®„ÅØ„ÄÅÊÅêÊÄñ„Åå„Å™„ÅÑ„Åì„Å®„Åò„ÇÉ„Å™„ÅÑ„ÄÇÊÅêÊÄñ„Å®ÂÖ±„Å´ÈÄ≤„ÇÄ„Åì„Å®„Å†„ÄÇ",
            "Ëá™Â∑±ÊäïË≥á„ÅØ„ÄÅÂîØ‰∏ÄÁµ∂ÂØæ„Å´Ë£èÂàá„Çâ„Å™„ÅÑÊäïË≥á„Å†„ÄÇ",
            "Áü•Ë≠ò„Å®ÊäÄË°ì„ÅØ„ÄÅË™∞„Å´„ÇÇÂ•™„Åà„Å™„ÅÑË≤°Áî£„Å†„ÄÇ",
            "„ÅÇ„Å™„Åü„ÅÆÊåëÊà¶„Åå„ÄÅË™∞„Åã„ÅÆÂ∏åÊúõ„Å´„Å™„Çã„ÄÇ",
            "ÂÆ∂Êóè„ÅÆ„Åü„ÇÅ„Å´„ÄÅ„Åæ„ÅöËá™ÂàÜ„ÅåËºù„Åë„ÄÇ",
            "„ÅÇ„Å™„Åü„ÅÆËÉå‰∏≠„ÇíË¶ã„Å¶„ÄÅË™∞„Åã„ÅåÂãáÊ∞ó„Çí„ÇÇ„Çâ„Å£„Å¶„ÅÑ„Çã„ÄÇ",
            "ÂÆåÁíß„ÇíÁõÆÊåá„Åô„Å™„ÄÇÂÆåÊàê„ÇíÁõÆÊåá„Åõ„ÄÇ",
            "ÊØîËºÉ„Åô„Çã„Å™„Çâ„ÄÅÊò®Êó•„ÅÆËá™ÂàÜ„Å®„Å†„Åë„ÄÇ",
            "ÁÑ¶„Çâ„Å™„ÅÑ„ÄÇËá™ÂàÜ„ÅÆ„Éö„Éº„Çπ„Åß„ÄÅÁ¢∫ÂÆü„Å´„ÄÇ",
            "‰ºë„ÇÄ„Åì„Å®„ÇÇ„ÄÅÊàêÈï∑„ÅÆ‰∏ÄÈÉ®„Å†„ÄÇ",
            "Êúù„ÅÆ30ÂàÜ„ÅØ„ÄÅÂ§ú„ÅÆ2ÊôÇÈñì„Å´ÂåπÊïµ„Åô„Çã„ÄÇ",
            "ÈõÜ‰∏≠„ÅÆ15ÂàÜ„ÅØ„ÄÅ„ÉÄ„É©„ÉÄ„É©„ÅÆ3ÊôÇÈñì„ÇíË∂Ö„Åà„Çã„ÄÇ",
            "„Çø„Ç§„Éû„Éº„Çí„Çª„ÉÉ„Éà„Åó„Å¶„ÄÅ‰ªäÊó•„ÇÇÂÖ®Âäõ„ÅßÈßÜ„ÅëÊäú„Åë„Çç„ÄÇ",
            "ÊôÇÈñì„ÅØ‰Ωú„Çã„ÇÇ„ÅÆ„ÄÇÂæÖ„Å£„Å¶„ÅÑ„Å¶„ÇÇÊù•„Å™„ÅÑ„ÄÇ",
            "Expert-Reboot-54„ÄÅÈ†ÜË™ø„Å´Ëµ∑Âãï‰∏≠ÔºÅ",
            "‰ªäÊó•„ÅÆ„É≠„Ç∞„Åå„ÄÅÊú™Êù•„ÅÆË≥áÁî£„Å´„Å™„Çã„ÄÇ",
            "GitHub„ÅÆËçâ„ÇíËÇ≤„Å¶„Çã„Åì„Å®„Åå„ÄÅÁøíÊÖ£„ÇíËÇ≤„Å¶„Çã„ÄÇ",
            "ÂÜôÁµå„ÅØÊúÄÈ´ò„ÅÆÂ≠¶ÁøíÊ≥ï„ÄÇÊâã„ÇíÂãï„Åã„Åõ„Å∞„ÄÅÁêÜËß£„ÅåÊ∑±„Åæ„Çã„ÄÇ",
            "„Ç¢„Ç¶„Éà„Éó„ÉÉ„Éà„Åó„Å¶„Åì„Åù„ÄÅÁúü„ÅÆÁêÜËß£„ÅåÁîü„Åæ„Çå„Çã„ÄÇ",
            "„Åæ„ÅöÂãï„Åã„Åõ„ÄÇÊúÄÈÅ©Âåñ„ÅØ„Åù„ÅÆÂæå„Å†„ÄÇ",
            "„ÅÇ„Å™„Åü„ÅÆ„Ç≥„Éº„Éâ„Åå„ÄÅË™∞„Åã„ÅÆ‰∫∫Áîü„ÇíÂ§â„Åà„ÇãÊó•„ÅåÊù•„Çã„ÄÇ",
            "‰ΩôÁôΩ„ÅÆ„ÅÇ„Çã‰∫∫Áîü„Çí„ÄÅÊäÄË°ì„ÅßÂÆüÁèæ„Åó„Çà„ÅÜ„ÄÇ",
            "„ÅÇ„Å™„Åü„ÅÆÂ§¢„ÅØ„ÄÅÂøÖ„ÅöÂè∂„ÅÜ„ÄÇË´¶„ÇÅ„Å™„Åë„Çå„Å∞„ÄÇ",
            "‰ªäÊó•„ÇÇÂ≠¶„Åπ„Åü„Åì„Å®„Å´„ÄÅÊÑüË¨ù„Åó„Çà„ÅÜ„ÄÇ",
            "‰ªäÊó•„ÇÇËá™ÂàÜ„ÇíË§í„ÇÅ„Çà„ÅÜ„ÄÇ„Çà„Åè„ÇÑ„Å£„Å¶„ÅÑ„Çã„ÄÇ",
            "Ê•Ω„Åó„ÇÄ„Åì„Å®„ÇíÂøò„Çå„Çã„Å™„ÄÇÂ≠¶„Å≥„ÅØÂÜíÈô∫„Å†„ÄÇ",
            "„ÅÇ„Å™„Åü„ÅÆÁõÆÊ®ô„ÅØ„ÄÅÂøÖ„ÅöÂÆüÁèæ„Åô„Çã„ÄÇ‰ø°„ÅòÁ∂ö„Åë„Çç„ÄÇ"
        ];

        const yellBtn = document.getElementById('yellBtn');
        const yellMessage = document.getElementById('yellMessage');
        let lastYellIndex = -1;

        function showYell() {
            let idx;
            do {
                idx = Math.floor(Math.random() * yellMessages.length);
            } while (idx === lastYellIndex && yellMessages.length > 1);
            lastYellIndex = idx;

            // Êó¢„Å´„É°„ÉÉ„Çª„Éº„Ç∏„ÅåË°®Á§∫„Åï„Çå„Å¶„ÅÑ„Åü„Çâ„ÄÅ‰∏ä„Å∏Ê∂à„Åà„Å¶„Åã„ÇâÊñ∞„Åó„ÅÑ„ÇÇ„ÅÆ„ÇíÂá∫„Åô
            if (yellMessage.style.display === 'block') {
                yellMessage.style.animation = 'yellDisappear 0.4s ease-in forwards';
                setTimeout(() => {
                    yellMessage.textContent = yellMessages[idx];
                    yellMessage.style.animation = 'none';
                    setTimeout(() => {
                        yellMessage.style.animation = 'yellAppear 0.7s cubic-bezier(0.22, 1, 0.36, 1) forwards';
                    }, 10);
                }, 420);
            } else {
                yellMessage.textContent = yellMessages[idx];
                yellMessage.style.display = 'block';
                yellMessage.style.animation = 'none';
                setTimeout(() => {
                    yellMessage.style.animation = 'yellAppear 0.7s cubic-bezier(0.22, 1, 0.36, 1) forwards';
                }, 10);
            }
        }

        // „Éú„Çø„É≥„ÇØ„É™„ÉÉ„ÇØ„ÅßË°®Á§∫
        yellBtn.addEventListener('click', showYell);

        // 1ÂàÜ„Åî„Å®„Å´Ëá™Âãï„ÅßÂÖ•„ÇåÊõø„ÅàÔºàËµ∑Âãï1ÁßíÂæå„Å´ÂàùÂõûË°®Á§∫Ôºâ
        setTimeout(showYell, 1000);
        setInterval(showYell, 60 * 1000);

        // ===== „Éù„É¢„Éâ„Éº„É≠Ôºà9_Pomodoro Áµ±ÂêàÔºâÂÆöÊï∞„ÉªDOM =====
        const WORK_SEC = 25 * 60;
        const BREAK_SEC = 5 * 60;
        const TOTAL_POMODOROS = 4;
        const POMODORO_CIRCUMFERENCE = 2 * Math.PI * 55;
        const POMODORO_MIN_SEC = 5 * 60;   // 5ÂàÜ
        const POMODORO_MAX_SEC = 60 * 60;  // 60ÂàÜ
        const POMODORO_STEP = 5 * 60;      // 5ÂàÜÂàª„Åø

        const timerDisplay = document.getElementById('timerDisplay');
        const timerCard = document.getElementById('timerCard');
        const phaseLabel = document.getElementById('phaseLabel');
        const pomodoroProgressRing = document.getElementById('pomodoroProgressRing');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const messageArea = document.getElementById('messageArea');
        const statusDot = document.getElementById('statusDot');
        const statusText = document.getElementById('statusText');
        const pomodoroArrowUp = document.getElementById('pomodoroArrowUp');
        const pomodoroArrowDown = document.getElementById('pomodoroArrowDown');
        const flipCards = {
            m1: document.getElementById('flipM1'),
            m2: document.getElementById('flipM2'),
            s1: document.getElementById('flipS1'),
            s2: document.getElementById('flipS2'),
        };

        let remainingSec = WORK_SEC;
        let totalSec = WORK_SEC;
        let isWork = true;
        let isRunning = false;
        let timerId = null;
        let completedPomodoros = 0;

        function flipDigit(card, newVal) {
            const cur = card.querySelector('.flip-current');
            const oldVal = cur.textContent;
            if (oldVal === newVal) return;

            card.querySelectorAll('.flip-top, .flip-bottom').forEach(el => el.remove());

            const top = document.createElement('div');
            top.className = 'flip-top';
            const topDigit = document.createElement('div');
            topDigit.className = 'flip-digit';
            topDigit.textContent = oldVal;
            top.appendChild(topDigit);

            const bottom = document.createElement('div');
            bottom.className = 'flip-bottom';
            const bottomDigit = document.createElement('div');
            bottomDigit.className = 'flip-digit';
            bottomDigit.textContent = newVal;
            bottom.appendChild(bottomDigit);

            card.appendChild(top);
            card.appendChild(bottom);

            // ‰∏äÂçäÂàÜ: „ÇÅ„Åè„Çå‰∏ã„Åå„Çã„ÅÆ„Å®ÂêåÊôÇ„Å´Êï∞Â≠ó„ÅåÂ§â„Çè„Çã„Çà„ÅÜ„ÄÅ‰∏ä„Éï„É©„ÉÉ„Éó„ÅåÊ∂à„Åà„ÇãÂâçÔºà0.3sÔºâ„Å´Êõ¥Êñ∞
            setTimeout(() => { cur.textContent = newVal; }, 300);
            setTimeout(() => { top.remove(); bottom.remove(); }, 800);
        }

        function updatePomodoroUI() {
            const m = Math.floor(remainingSec / 60);
            const s = remainingSec % 60;
            const m1 = String(Math.floor(m / 10));
            const m2 = String(m % 10);
            const s1 = String(Math.floor(s / 10));
            const s2 = String(s % 10);

            flipDigit(flipCards.m1, m1);
            flipDigit(flipCards.m2, m2);
            flipDigit(flipCards.s1, s1);
            flipDigit(flipCards.s2, s2);

            const progress = totalSec > 0 ? (totalSec - remainingSec) / totalSec : 1;
            pomodoroProgressRing.style.strokeDashoffset = POMODORO_CIRCUMFERENCE * (1 - progress);

            timerCard.classList.remove('work-phase', 'break-phase');
            timerCard.classList.add(isWork ? 'work-phase' : 'break-phase');
            const phaseMin = Math.round(totalSec / 60);
            phaseLabel.textContent = isWork ? `üçÖ ÈõÜ‰∏≠Ôºà${phaseMin}ÂàÜÔºâ` : `‚òï ‰ºëÊÜ©Ôºà${phaseMin}ÂàÜÔºâ`;

            statusText.textContent = isRunning ? (isWork ? 'concentration' : '‚òï ‰ºëÊÜ©‰∏≠...') : 'ÂæÖÊ©ü‰∏≠';

            pomodoroArrowUp.classList.toggle('disabled', isRunning || remainingSec >= POMODORO_MAX_SEC);
            pomodoroArrowDown.classList.toggle('disabled', isRunning || remainingSec <= POMODORO_MIN_SEC);
        }

        function pomodoroTick() {
            remainingSec--;
            updatePomodoroUI();
            if (remainingSec <= 0) {
                const overlay = document.getElementById('zeroFlashOverlay');
                if (overlay) {
                    overlay.classList.remove('flash');
                    overlay.offsetHeight;
                    overlay.classList.add('flash');
                    setTimeout(() => overlay.classList.remove('flash'), 1900);
                }
                clearInterval(timerId);
                timerId = null;
                isRunning = false;
                if (isWork) {
                    completedPomodoros = Math.min(completedPomodoros + 1, TOTAL_POMODOROS);
                    isWork = false;
                    remainingSec = BREAK_SEC;
                    totalSec = BREAK_SEC;
                    startBtn.textContent = '‚ñ∂ ‰ºëÊÜ©„Çπ„Çø„Éº„Éà';
                } else {
                    isWork = true;
                    remainingSec = WORK_SEC;
                    totalSec = WORK_SEC;
                    startBtn.textContent = '‚ñ∂ „Çπ„Çø„Éº„Éà';
                }
                updatePomodoroUI();
            }
        }

        startBtn.addEventListener('click', () => {
            if (isRunning) {
                clearInterval(timerId);
                timerId = null;
                isRunning = false;
                startBtn.textContent = isWork ? '‚ñ∂ „Çπ„Çø„Éº„Éà' : '‚ñ∂ ‰ºëÊÜ©„Çπ„Çø„Éº„Éà';
                statusText.textContent = '‚è∏ ‰∏ÄÊôÇÂÅúÊ≠¢‰∏≠';
            } else {
                if (remainingSec <= 0) return;
                isRunning = true;
                startBtn.textContent = '‚è∏ ‰∏ÄÊôÇÂÅúÊ≠¢';
                statusDot.classList.add('active');
                timerId = setInterval(pomodoroTick, 1000);
            }
        });

        resetBtn.addEventListener('click', () => {
            clearInterval(timerId);
            timerId = null;
            isRunning = false;
            isWork = true;
            remainingSec = WORK_SEC;
            totalSec = WORK_SEC;
            startBtn.textContent = '‚ñ∂ „Çπ„Çø„Éº„Éà';
            statusDot.classList.remove('active');
            updatePomodoroUI();
        });

        function adjustPomodoroTime(delta) {
            if (isRunning) return;
            const next = Math.max(POMODORO_MIN_SEC, Math.min(POMODORO_MAX_SEC, remainingSec + delta));
            remainingSec = next;
            totalSec = next;
            updatePomodoroUI();
        }

        pomodoroArrowUp.addEventListener('click', () => adjustPomodoroTime(POMODORO_STEP));
        pomodoroArrowDown.addEventListener('click', () => adjustPomodoroTime(-POMODORO_STEP));

        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                startBtn.click();
            }
            if (e.code === 'KeyR' && !e.ctrlKey && !e.metaKey) {
                resetBtn.click();
            }
            if (e.code === 'ArrowUp') {
                e.preventDefault();
                adjustPomodoroTime(POMODORO_STEP);
            }
            if (e.code === 'ArrowDown') {
                e.preventDefault();
                adjustPomodoroTime(-POMODORO_STEP);
            }
        });

        // ===== „Ç≥„Éº„Éí„ÉºË±Ü„ÅÆËÉåÊôØ„Éë„Éº„ÉÜ„Ç£„ÇØ„É´ÁîüÊàê =====
        function createCoffeeBeans() {
            const beanEmojis = ['‚òï', '‚ú¶', '‚Ä¢'];
            for (let i = 0; i < 12; i++) {
                const bean = document.createElement('div');
                bean.className = 'coffee-bean';
                bean.textContent = beanEmojis[Math.floor(Math.random() * beanEmojis.length)];
                bean.style.left = Math.random() * 100 + 'vw';
                bean.style.animationDuration = (Math.random() * 15 + 15) + 's';
                bean.style.animationDelay = (Math.random() * 20) + 's';
                bean.style.fontSize = (Math.random() * 1 + 0.8) + 'rem';
                document.body.appendChild(bean);
            }
        }

        updatePomodoroUI();
        createCoffeeBeans();

        // Ëµ∑ÂãïÂæåÔºà„Éó„É´„ÉÄ„Ç¶„É≥Êõ¥Êñ∞Âê´„ÇÄÔºâ„Å´Ëá™Âãï„Åß„Çø„Ç§„Éû„ÉºÈñãÂßã
        setTimeout(() => {
            if (!isRunning && remainingSec > 0) {
                isRunning = true;
                startBtn.textContent = '‚è∏ ‰∏ÄÊôÇÂÅúÊ≠¢';
                statusDot.classList.add('active');
                statusText.textContent = isWork ? 'concentration' : '‚òï ‰ºëÊÜ©‰∏≠...';
                timerId = setInterval(pomodoroTick, 1000);
            }
        }, 800);

        // ===== „Éó„É´„Éà„Ç•„É™„Éï„É¨„ÉÉ„Ç∑„É• =====
        (function() {
            const ptr = document.getElementById('ptrIndicator');
            const ptrCup = document.getElementById('ptrCup');
            const ptrTextEl = document.getElementById('ptrText');
            const ptrBar = document.getElementById('ptrProgressBar');
            const maxH = 120;
            const readyH = 60;
            let startY = 0;
            let pulling = false;

            document.addEventListener('touchstart', (e) => {
                if (window.scrollY === 0) {
                    startY = e.touches[0].clientY;
                    pulling = true;
                    ptr.classList.add('active');
                    ptr.classList.remove('ready', 'refreshing');
                }
            }, { passive: true });

            document.addEventListener('touchmove', (e) => {
                if (!pulling) return;
                const dy = Math.max(0, e.touches[0].clientY - startY);
                const h = Math.min(dy * 0.5, maxH);
                ptr.style.height = h + 'px';

                // Âºï„Å£Âºµ„ÇäÂÖ∑Âêà„Å´Âøú„Åò„Å¶„Ç´„ÉÉ„Éó„Çí„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
                const progress = Math.min(h / readyH, 1);
                const scale = 0.8 + progress * 0.3;
                const opacity = 0.4 + progress * 0.6;
                const moveY = -10 + progress * 10;
                ptrCup.style.transform = `translateY(${moveY}px) scale(${scale})`;
                ptrCup.style.opacity = opacity;
                ptrBar.style.width = (progress * 100) + '%';

                if (h >= readyH) {
                    ptr.classList.add('ready');
                    ptrTextEl.textContent = '‚òï Èõ¢„Åó„Å¶Êõ¥Êñ∞';
                } else {
                    ptr.classList.remove('ready');
                    ptrTextEl.textContent = '‚Üì Âºï„Å£Âºµ„Å£„Å¶Êõ¥Êñ∞';
                }
            }, { passive: true });

            document.addEventListener('touchend', () => {
                if (!pulling) return;
                pulling = false;
                ptr.classList.remove('active');
                const h = parseInt(ptr.style.height) || 0;

                if (h >= readyH) {
                    ptr.classList.remove('ready');
                    ptr.classList.add('refreshing');
                    ptrCup.style.transform = '';
                    ptrCup.style.opacity = '1';
                    ptrTextEl.textContent = 'Êõ¥Êñ∞‰∏≠...';
                    ptr.style.height = '100px';
                    setTimeout(() => location.reload(), 800);
                } else {
                    ptrCup.style.transform = '';
                    ptrCup.style.opacity = '';
                    ptrBar.style.width = '0%';
                    ptr.style.height = '0';
                }
            }, { passive: true });
        })();

        // ===== Notion„É°„É¢ÔºöÂÖ•Âäõ„ÉªÈü≥Â£∞„Éª„Ç≥„Éî„ÉºÔºàÊâãÂãï„ÅßNotion„Å´Ë≤º„Çä‰ªò„ÅëÔºâ =====
        (function() {
            const notionLink = document.getElementById('notionLink');
            const notionRecordPanel = document.getElementById('notionRecordPanel');
            const notionRecordInput = document.getElementById('notionRecordInput');
            const closeNotionPanel = document.getElementById('closeNotionPanel');
            const copyBtn = document.getElementById('copyToClipboardBtn');
            if (!notionLink || !notionRecordPanel) return;

            notionLink.addEventListener('click', function(e) {
                e.preventDefault();
                notionRecordPanel.classList.add('is-open');
                notionRecordPanel.setAttribute('aria-hidden', 'false');
                notionRecordInput.focus();
            });
            closeNotionPanel.addEventListener('click', function() {
                notionRecordPanel.classList.remove('is-open');
                notionRecordPanel.setAttribute('aria-hidden', 'true');
            });

            // „Ç≥„Éî„ÉºÔºö„ÉÜ„Ç≠„Çπ„Éà„Ç®„É™„Ç¢„ÅÆÂÜÖÂÆπ„Çí„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å´„Ç≥„Éî„Éº
            if (copyBtn && notionRecordInput) {
                copyBtn.addEventListener('click', function() {
                    const text = notionRecordInput.value.trim();
                    if (!text) {
                        if (navigator.clipboard && navigator.clipboard.writeText) {
                            navigator.clipboard.writeText('').catch(function() {});
                        }
                        return;
                    }
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                        navigator.clipboard.writeText(text).then(function() {
                            copyBtn.textContent = '‚úì „Ç≥„Éî„Éº„Åó„Åü';
                            setTimeout(function() { copyBtn.textContent = 'üìã „Ç≥„Éî„Éº'; }, 1500);
                        }).catch(function() {
                            fallbackCopy(notionRecordInput);
                        });
                    } else {
                        fallbackCopy(notionRecordInput);
                    }
                });
            }
            function fallbackCopy(el) {
                el.select();
                try {
                    document.execCommand('copy');
                    copyBtn.textContent = '‚úì „Ç≥„Éî„Éº„Åó„Åü';
                    setTimeout(function() { copyBtn.textContent = 'üìã „Ç≥„Éî„Éº'; }, 1500);
                } catch (err) {}
            }
        })();

        // ===== Service Worker ÁôªÈå≤ =====
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js').catch(() => {});
        }
    </script>
</body>
</html>
