<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Cafe Study Timer - 7:00„Äú9:00</title>

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2c1810">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CafeTimer">
    <link rel="apple-touch-icon" href="icon-192.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Yu Gothic', 'Hiragino Sans', sans-serif;
            background: linear-gradient(135deg, #1a0e0a 0%, #2c1810 30%, #3d2317 60%, #1a0e0a 100%);
            min-height: 100vh;
            min-height: 100dvh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
            color: #f5e6d3;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }

        /* ===== „Éó„É´„Éà„Ç•„É™„Éï„É¨„ÉÉ„Ç∑„É• ===== */
        .ptr-indicator {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            height: 0;
            overflow: hidden;
            z-index: 100;
            background: linear-gradient(180deg, rgba(212,165,116,0.12) 0%, transparent 100%);
            transition: height 0.3s cubic-bezier(0.2, 0.8, 0.3, 1);
            pointer-events: none;
            padding-bottom: 8px;
        }

        .ptr-indicator.active {
            transition: none;
        }

        /* „Ç´„ÉÉ„Éó„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
        .ptr-cup {
            transition: transform 0.15s ease;
            transform: translateY(-10px) scale(0.8);
            opacity: 0.4;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
        }

        .ptr-indicator.active .ptr-cup {
            transition: none;
        }

        .ptr-indicator.ready .ptr-cup {
            animation: ptrBounce 0.4s ease;
        }

        .ptr-indicator.refreshing .ptr-cup {
            animation: ptrCupSpin 1s cubic-bezier(0.4, 0, 0.2, 1) infinite;
        }

        @keyframes ptrBounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-8px) scale(1.1); }
        }

        @keyframes ptrCupSpin {
            0% { transform: translateY(0) rotate(0deg) scale(1); }
            25% { transform: translateY(-4px) rotate(5deg) scale(1.05); }
            50% { transform: translateY(0) rotate(0deg) scale(1); }
            75% { transform: translateY(-4px) rotate(-5deg) scale(1.05); }
            100% { transform: translateY(0) rotate(0deg) scale(1); }
        }

        /* Ê∞¥Êª¥ */
        .ptr-drops {
            display: flex;
            gap: 12px;
            height: 16px;
            margin-top: 2px;
        }

        .ptr-drop {
            font-size: 0.6rem;
            opacity: 0;
            transform: translateY(-8px);
            transition: all 0.2s ease;
        }

        .ptr-indicator.ready .ptr-drop,
        .ptr-indicator.refreshing .ptr-drop {
            opacity: 0.7;
            animation: ptrDrip 0.8s ease-in-out infinite;
        }

        .ptr-drop:nth-child(1) { animation-delay: 0s; }
        .ptr-drop:nth-child(2) { animation-delay: 0.25s; }
        .ptr-drop:nth-child(3) { animation-delay: 0.5s; }

        @keyframes ptrDrip {
            0% { transform: translateY(-4px); opacity: 0.7; }
            100% { transform: translateY(8px); opacity: 0; }
        }

        /* „ÉÜ„Ç≠„Çπ„Éà */
        .ptr-text {
            font-size: 0.7rem;
            color: #a08060;
            margin-top: 2px;
            transition: color 0.2s ease;
            letter-spacing: 0.5px;
        }

        .ptr-indicator.ready .ptr-text {
            color: #d4a574;
        }

        .ptr-indicator.refreshing .ptr-text {
            color: #e8c9a0;
        }

        /* „Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº */
        .ptr-progress {
            width: 60px;
            height: 3px;
            background: rgba(255,255,255,0.06);
            border-radius: 2px;
            margin-top: 4px;
            overflow: hidden;
        }

        .ptr-progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #d4a574, #e8c9a0);
            border-radius: 2px;
            transition: width 0.1s linear;
        }

        .ptr-indicator.refreshing .ptr-progress-bar {
            width: 100% !important;
            animation: ptrProgressPulse 0.8s ease-in-out infinite;
        }

        @keyframes ptrProgressPulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* ===== ËÉåÊôØ„ÅÆ„Ç¢„Ç§„Çπ„Ç´„Éï„Çß„É©„ÉÜ„Ç¢„Ç§„Ç≥„É≥ ===== */
        .bg-latte {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 0;
            opacity: 0.06;
            pointer-events: none;
            animation: latteFloat 12s ease-in-out infinite;
        }

        @keyframes latteFloat {
            0%, 100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
            50% { transform: translate(-50%, -52%) scale(1.03) rotate(1deg); }
        }

        /* ÊµÆ„Åã„Å∂„Ç≥„Éº„Éí„ÉºË±Ü„ÅÆËÉåÊôØË£ÖÈ£æ */
        .coffee-bean {
            position: fixed;
            font-size: 1.5rem;
            opacity: 0.08;
            pointer-events: none;
            animation: beanDrift 20s linear infinite;
            z-index: 0;
        }

        @keyframes beanDrift {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.08; }
            90% { opacity: 0.08; }
            100% { transform: translateY(-10vh) rotate(720deg); opacity: 0; }
        }

        /* ÊπØÊ∞ó„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
        .steam-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -70%);
            z-index: 0;
            pointer-events: none;
        }

        .steam {
            position: absolute;
            width: 8px;
            height: 80px;
            background: linear-gradient(to top, rgba(255,255,255,0.04), transparent);
            border-radius: 50%;
            animation: steamRise 4s ease-out infinite;
            filter: blur(6px);
        }

        .steam:nth-child(1) { left: -20px; animation-delay: 0s; }
        .steam:nth-child(2) { left: 0px; animation-delay: 1.2s; }
        .steam:nth-child(3) { left: 20px; animation-delay: 2.4s; }

        @keyframes steamRise {
            0% { transform: translateY(0) scaleX(1); opacity: 0.5; }
            50% { transform: translateY(-60px) scaleX(2); opacity: 0.3; }
            100% { transform: translateY(-120px) scaleX(3); opacity: 0; }
        }

        /* ===== „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„Éä ===== */
        .container {
            position: relative;
            z-index: 1;
            text-align: center;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
        }

        /* „Éò„ÉÉ„ÉÄ„Éº */
        .header-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            animation: iconPulse 3s ease-in-out infinite;
        }

        @keyframes iconPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .title {
            font-size: clamp(1.6rem, 4vw, 2.4rem);
            font-weight: 700;
            margin-bottom: 0.3rem;
            background: linear-gradient(135deg, #d4a574 0%, #e8c9a0 40%, #f0d9b5 70%, #c4956a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 2px;
        }

        .subtitle {
            font-size: clamp(0.85rem, 2vw, 1rem);
            color: #a08060;
            margin-bottom: 2rem;
            font-weight: 300;
            letter-spacing: 1px;
        }

        /* ===== „Çø„Ç§„Éû„ÉºË°®Á§∫ ===== */
        .timer-card {
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(20px);
            border-radius: 28px;
            border: 1px solid rgba(212, 165, 116, 0.15);
            box-shadow:
                0 20px 60px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            padding: 2.5rem 2rem;
            margin-bottom: 1.5rem;
            transition: all 0.5s ease;
        }

        .timer-card.warning {
            border-color: rgba(255, 160, 60, 0.4);
            box-shadow:
                0 20px 60px rgba(0, 0, 0, 0.4),
                0 0 40px rgba(255, 160, 60, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .current-time {
            font-size: clamp(1rem, 3vw, 1.3rem);
            color: #d4a574;
            font-weight: 300;
            letter-spacing: 2px;
            margin-bottom: 1.2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(212, 165, 116, 0.1);
            font-variant-numeric: tabular-nums;
        }

        .current-time-value {
            font-weight: 600;
            color: #e8c9a0;
        }

        .time-label {
            font-size: 0.85rem;
            color: #a08060;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 0.8rem;
        }

        .timer-adjust-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.2rem;
        }

        .adjust-btn {
            background: none;
            border: 1px solid rgba(212, 165, 116, 0.15);
            color: #a08060;
            font-size: 0.9rem;
            width: 60px;
            height: 28px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
            opacity: 0.5;
        }

        .adjust-btn:hover {
            opacity: 1;
            background: rgba(212, 165, 116, 0.1);
            border-color: rgba(212, 165, 116, 0.35);
            color: #d4a574;
        }

        .adjust-btn:active {
            transform: scale(0.92);
            background: rgba(212, 165, 116, 0.18);
        }

        .adjust-btn.disabled {
            opacity: 0.15;
            pointer-events: none;
        }

        .adjust-btn.flash {
            color: #e8c9a0;
            border-color: rgba(212, 165, 116, 0.5);
            background: rgba(212, 165, 116, 0.15);
        }

        .adjust-hint {
            font-size: 0.7rem;
            color: #605040;
            letter-spacing: 0.5px;
            margin-top: 0.3rem;
            margin-bottom: 0.8rem;
            transition: opacity 0.3s ease;
        }

        .adjust-hint.hidden {
            opacity: 0;
        }

        .timer-display {
            font-size: clamp(3.5rem, 12vw, 6rem);
            font-weight: 800;
            font-variant-numeric: tabular-nums;
            letter-spacing: 4px;
            line-height: 1;
            margin-bottom: 1rem;
            color: #f5e6d3;
            text-shadow: 0 0 30px rgba(212, 165, 116, 0.2);
            transition: color 0.5s ease;
        }

        .timer-display.warning {
            color: #ffa03c;
            text-shadow: 0 0 40px rgba(255, 160, 60, 0.3);
            animation: warningPulse 1.5s ease-in-out infinite;
        }

        .timer-display.finished {
            color: #66bb6a;
            text-shadow: 0 0 40px rgba(102, 187, 106, 0.3);
        }

        @keyframes warningPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        /* „Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº */
        .progress-container {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.06);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress-bar {
            height: 100%;
            border-radius: 3px;
            background: linear-gradient(90deg, #d4a574, #c4956a, #a07050);
            transition: width 1s linear;
            position: relative;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            right: 0;
            top: 0;
            width: 30px;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3));
            border-radius: 3px;
        }

        .progress-bar.warning {
            background: linear-gradient(90deg, #ffa03c, #ff8c1a, #e67e22);
        }

        /* ÊôÇÈñìÁØÑÂõ≤Ë°®Á§∫ */
        .time-range {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #806040;
            margin-bottom: 0.5rem;
        }

        /* ===== „É°„ÉÉ„Çª„Éº„Ç∏ ===== */
        .message-area {
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
        }

        .message {
            font-size: clamp(1rem, 2.5vw, 1.3rem);
            line-height: 1.8;
            padding: 1.2rem 2rem;
            background: rgba(255, 160, 60, 0.08);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(255, 160, 60, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            color: #ffd090;
            font-weight: 600;
            opacity: 0;
            transform: translateY(20px) scale(0.95);
            animation: messageAppear 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes messageAppear {
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .message.success {
            background: rgba(102, 187, 106, 0.1);
            border-color: rgba(102, 187, 106, 0.25);
            color: #a5d6a7;
        }

        /* ===== „Ç≥„É≥„Éà„É≠„Éº„É´„Éú„Çø„É≥ ===== */

        .btn {
            padding: 0.9rem 2.5rem;
            font-size: 1rem;
            font-weight: 600;
            color: #f5e6d3;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .btn-start {
            background: linear-gradient(135deg, #d4a574 0%, #a07050 100%);
            box-shadow: 0 8px 25px rgba(160, 112, 80, 0.3);
        }

        .btn-start:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(160, 112, 80, 0.4);
        }

        .btn-start:active {
            transform: translateY(-1px);
        }

        .btn-reset {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(212, 165, 116, 0.2);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-reset:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        /* ===== „Éâ„É™„É≥„ÇØÊÉÖÂ†± ===== */
        .drink-info {
            margin-top: 2rem;
            font-size: 0.85rem;
            color: #806040;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .drink-info .icon {
            font-size: 1.2rem;
        }

        /* ===== „Çø„Ç§„Éû„Éº„Ç´„Éº„ÉâÂÜÖ„Ç≥„É≥„Éà„É≠„Éº„É´ ===== */
        .controls-inline {
            display: flex;
            gap: 0.8rem;
            justify-content: center;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(212, 165, 116, 0.1);
        }

        .controls-inline .btn {
            padding: 0.6rem 1.8rem;
            font-size: 0.85rem;
        }

        /* ===== „Ç®„Éº„É´ ===== */
        .yell-area {
            min-height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.5rem;
        }

        .yell-message {
            font-size: clamp(0.85rem, 2vw, 1rem);
            line-height: 1.7;
            padding: 0.7rem 1.4rem;
            background: rgba(102, 126, 234, 0.08);
            backdrop-filter: blur(10px);
            border-radius: 14px;
            border: 1px solid rgba(102, 126, 234, 0.2);
            color: #b0c4ff;
            font-weight: 500;
            opacity: 0;
            transform: translateY(30px) scale(0.95);
            filter: blur(4px);
            animation: yellAppear 0.7s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        }

        @keyframes yellAppear {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
                filter: blur(4px);
            }
            60% {
                opacity: 1;
                filter: blur(0px);
            }
            80% {
                transform: translateY(-4px) scale(1.01);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0px);
            }
        }

        @keyframes yellDisappear {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0px);
            }
            100% {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
                filter: blur(4px);
            }
        }

        .yell-btn {
            background: none;
            border: 1px solid rgba(102, 126, 234, 0.25);
            color: #8898d0;
            font-size: 0.8rem;
            padding: 0.35rem 1.2rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.25s ease;
            margin-bottom: 0.8rem;
            letter-spacing: 1px;
            font-weight: 500;
        }

        .yell-btn:hover {
            background: rgba(102, 126, 234, 0.12);
            border-color: rgba(102, 126, 234, 0.45);
            color: #a0b4ee;
            transform: scale(1.05);
        }

        .yell-btn:active {
            transform: scale(0.96);
        }

        /* ===== „Çπ„ÉÜ„Éº„Çø„Çπ„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº ===== */
        .status {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.8rem;
            color: #806040;
            margin-bottom: 1.5rem;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #555;
            transition: background 0.3s ease;
        }

        .status-dot.active {
            background: #66bb6a;
            box-shadow: 0 0 10px rgba(102, 187, 106, 0.4);
            animation: dotBlink 2s ease-in-out infinite;
        }

        .status-dot.warning {
            background: #ffa03c;
            box-shadow: 0 0 10px rgba(255, 160, 60, 0.4);
            animation: dotBlink 1s ease-in-out infinite;
        }

        @keyframes dotBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }

        /* ===== „É¨„Çπ„Éù„É≥„Ç∑„Éñ ===== */
        @media (max-width: 480px) {
            .container {
                padding: 1.5rem;
            }
            .timer-card {
                padding: 2rem 1.5rem;
            }
            .controls-inline .btn {
                padding: 0.5rem 1.4rem;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>

    <!-- ËÉåÊôØ„Ç¢„Ç§„Çπ„Ç´„Éï„Çß„É©„ÉÜ SVG -->
    <div class="bg-latte">
        <svg width="420" height="560" viewBox="0 0 420 560" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- „Ç´„ÉÉ„ÉóÊú¨‰Ωì -->
            <rect x="100" y="140" width="220" height="320" rx="20" fill="#f5e6d3" stroke="#d4a574" stroke-width="3"/>
            <!-- „Ç´„ÉÉ„Éó„ÅÆÂ∫ï -->
            <ellipse cx="210" cy="460" rx="110" ry="15" fill="#e8c9a0" stroke="#d4a574" stroke-width="2"/>
            <!-- „Çπ„Éà„É≠„Éº -->
            <rect x="250" y="40" width="12" height="380" rx="6" fill="#c0392b" opacity="0.8"/>
            <rect x="245" y="40" width="22" height="30" rx="5" fill="#e74c3c" opacity="0.7"/>
            <!-- „Ç¢„Ç§„ÇπÔºàÊ∞∑Ôºâ -->
            <rect x="140" y="180" width="50" height="40" rx="8" fill="rgba(255,255,255,0.6)" stroke="rgba(200,200,200,0.4)" stroke-width="1.5"/>
            <rect x="200" y="200" width="45" height="35" rx="8" fill="rgba(255,255,255,0.5)" stroke="rgba(200,200,200,0.3)" stroke-width="1.5"/>
            <rect x="160" y="230" width="55" height="38" rx="8" fill="rgba(255,255,255,0.4)" stroke="rgba(200,200,200,0.3)" stroke-width="1.5"/>
            <rect x="220" y="250" width="40" height="30" rx="8" fill="rgba(255,255,255,0.5)" stroke="rgba(200,200,200,0.3)" stroke-width="1.5"/>
            <!-- „Ç´„Éï„Çß„É©„ÉÜ„ÅÆÊ∂≤‰ΩìÔºà„Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥Ôºâ -->
            <defs>
                <linearGradient id="latte" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="0%" stop-color="#d4a574" stop-opacity="0.3"/>
                    <stop offset="40%" stop-color="#c4956a" stop-opacity="0.5"/>
                    <stop offset="100%" stop-color="#6f4e37" stop-opacity="0.7"/>
                </linearGradient>
            </defs>
            <rect x="103" y="280" width="214" height="175" rx="18" fill="url(#latte)"/>
            <!-- „Éü„É´„ÇØ„ÅÆÂ±§ -->
            <rect x="103" y="160" width="214" height="125" rx="18" fill="rgba(245,230,211,0.3)"/>
            <!-- „Ç´„ÉÉ„Éó„ÅÆ„Éï„ÉÅ -->
            <ellipse cx="210" cy="142" rx="112" ry="18" fill="#f0d9b5" stroke="#d4a574" stroke-width="3"/>
            <!-- „Ç´„ÉÉ„Éó„ÅÆ„Éè„Ç§„É©„Ç§„Éà -->
            <rect x="115" y="170" width="8" height="200" rx="4" fill="rgba(255,255,255,0.08)"/>
            <!-- „É©„Éô„É´ -->
            <rect x="140" y="340" width="140" height="50" rx="10" fill="rgba(139,90,43,0.15)" stroke="rgba(139,90,43,0.2)" stroke-width="1"/>
            <text x="210" y="370" text-anchor="middle" fill="#8b5a2b" font-size="16" font-weight="600" opacity="0.4">ICED LATTE</text>
        </svg>
    </div>

    <!-- ÊπØÊ∞ó„Ç®„Éï„Çß„ÇØ„ÉàÔºà„Ç¢„Ç§„Çπ„Å™„ÅÆ„ÅßÊéß„Åà„ÇÅÔºâ -->
    <div class="steam-container" style="opacity: 0.3;">
        <div class="steam"></div>
        <div class="steam"></div>
        <div class="steam"></div>
    </div>

    <!-- „Éó„É´„Éà„Ç•„É™„Éï„É¨„ÉÉ„Ç∑„É• „Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº -->
    <div class="ptr-indicator" id="ptrIndicator">
        <div class="ptr-cup" id="ptrCup">
            <svg width="50" height="60" viewBox="0 0 50 60" fill="none">
                <rect x="8" y="12" width="34" height="42" rx="4" fill="#f5e6d3" stroke="#d4a574" stroke-width="2"/>
                <rect x="10" y="32" width="30" height="20" rx="3" fill="#c4956a" opacity="0.6"/>
                <rect x="10" y="16" width="30" height="18" rx="3" fill="rgba(245,230,211,0.5)"/>
                <ellipse cx="25" cy="13" rx="18" ry="4" fill="#f0d9b5" stroke="#d4a574" stroke-width="1.5"/>
                <rect x="30" y="4" width="4" height="38" rx="2" fill="#c0392b" opacity="0.7"/>
                <rect x="15" y="20" width="8" height="6" rx="2" fill="rgba(255,255,255,0.5)"/>
                <rect x="25" y="24" width="7" height="5" rx="2" fill="rgba(255,255,255,0.4)"/>
            </svg>
        </div>
        <div class="ptr-drops" id="ptrDrops">
            <span class="ptr-drop">üíß</span>
            <span class="ptr-drop">üíß</span>
            <span class="ptr-drop">üíß</span>
        </div>
        <span class="ptr-text" id="ptrText">Âºï„Å£Âºµ„Å£„Å¶Êõ¥Êñ∞</span>
        <div class="ptr-progress" id="ptrProgress">
            <div class="ptr-progress-bar" id="ptrProgressBar"></div>
        </div>
    </div>

    <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
    <div class="container">
        <div class="header-icon">‚òï</div>
        <h1 class="title">Cafe Study Timer</h1>
        <p class="subtitle">„Ç´„Éï„Çß„Åß9:00„Åæ„Åß„ÅÆÈõÜ‰∏≠ÊôÇÈñì„Çí</p>

        <!-- „Ç®„Éº„É´Ë°®Á§∫„Ç®„É™„Ç¢ -->
        <div class="yell-area" id="yellArea">
            <div class="yell-message" id="yellMessage" style="display: none;"></div>
        </div>
        <button class="yell-btn" id="yellBtn">üì£ „Ç®„Éº„É´</button>

        <div class="status" id="statusArea">
            <span class="status-dot" id="statusDot"></span>
            <span id="statusText">ÂæÖÊ©ü‰∏≠</span>
        </div>

        <div class="timer-card" id="timerCard">
            <div class="current-time">üïê ÁèæÂú® <span class="current-time-value" id="currentTime">--:--:--</span></div>
            <div class="time-label">9:00„Åæ„ÅßÊÆã„Çä</div>
            <div class="timer-adjust-area">
                <button class="adjust-btn adjust-up" id="adjustUp" title="ÊôÇÈñì„ÇíÂ¢ó„ÇÑ„Åô (‚Üë)">‚ñ≤</button>
                <div class="timer-display" id="timerDisplay">2:00:00</div>
                <button class="adjust-btn adjust-down" id="adjustDown" title="ÊôÇÈñì„ÇíÊ∏õ„Çâ„Åô (‚Üì)">‚ñº</button>
            </div>
            <div class="adjust-hint" id="adjustHint">‚Üë‚Üì 5ÂàÜÂçò‰Ωç Ôºè Shift+‚Üë‚Üì 1ÂàÜÂçò‰Ωç</div>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>
            <div class="time-range">
                <span id="startTimeLabel">-- START</span>
                <span>9:00 FINISH</span>
            </div>
            <div class="controls-inline">
                <button class="btn btn-start" id="startBtn">‚ñ∂ „Çπ„Çø„Éº„Éà</button>
                <button class="btn btn-reset" id="resetBtn">‚Üª „É™„Çª„ÉÉ„Éà</button>
            </div>
        </div>

        <div class="message-area" id="messageArea"></div>

        <div class="drink-info">
            <span class="icon">üßä</span>
            <span>Today's Drink: „Ç¢„Ç§„Çπ„Ç´„Éï„Çß„É©„ÉÜ</span>
        </div>
    </div>

    <script>
        // ===== ÂÆöÊï∞ =====
        const DEADLINE_HOUR = 9;   // ÁµÇ‰∫ÜÊôÇÂàª: 9:00
        const DEADLINE_MIN = 0;
        const WARNING_SECONDS = 15 * 60;    // ÊÆã„Çä15ÂàÜ = 900Áßí

        // ÁèæÂú®ÊôÇÂàª„Åã„ÇâÁ∑†Âàá(9:00)„Åæ„Åß„ÅÆÊÆã„ÇäÁßíÊï∞„ÇíË®àÁÆó
        function calcSecondsUntilDeadline() {
            const now = new Date();
            const deadline = new Date(now);
            deadline.setHours(DEADLINE_HOUR, DEADLINE_MIN, 0, 0);
            // Êó¢„Å´9:00„ÇíÈÅé„Åé„Å¶„ÅÑ„Åü„Çâ0„ÇíËøî„Åô
            const diff = Math.floor((deadline - now) / 1000);
            return Math.max(0, diff);
        }

        // ===== „Ç®„Éº„É´„É°„ÉÉ„Çª„Éº„Ç∏Ôºà7_„Ç®„Éº„É´„Çà„ÇäÔºâ =====
        const yellMessages = [
            "‰∏ÄÊ≠©ÂâçÈÄ≤ÔºÅÊú™Êù•„ÅÆËá™ÂàÜ„Åå‰ªä„ÅÆ„ÅÇ„Å™„Åü„Å´ÊÑüË¨ù„Åó„Å¶„ÅÑ„Çã„Åû",
            "55‰∏áÂÜÜ„ÅÆÊäïË≥á„ÅØ„ÄÅÊúÄÈ´ò„ÅÆÊú™Êù•„Å∏„ÅÆ„ÉÅ„Ç±„ÉÉ„Éà„Å†Ôºà30Âõû„ÅÆÊ≠©„Åø„Å®ÂÖ±„Å´Ôºâ",
            "ÊäÄË°ì„Åß‰ΩôÁôΩ„Çí„ÄÅ‰ªïÁµÑ„Åø„ÅßÊÑüË¨ù„Çí„ÄÇ",
            "ÂÆåÁíß‰∏ªÁæ©„ÇíÊç®„Å¶„Çç„ÄÇ70%ÈÅãÁî®„ÅßÁ∂ôÁ∂ö„Åô„Çã„Åì„Å®„ÅåÊúÄÂ§ß„ÅÆÂãùÂà©„Å†„ÄÇ",
            "„ÅÇ„Å™„Åü„ÅØ‰ªä„ÄÅAI„Çí‰Ωø„Çè„Çå„ÇãÂÅ¥„Åã„Çâ„Äé‰Ωø„ÅÑ„Åì„Å™„ÅôÂÅ¥„Äè„Å∏ÈÄ≤Âåñ„Åó„Åü„ÄÇ",
            "„Çø„Ç§„Éî„É≥„Ç∞Á∑¥ÁøíÂÆå‰∫ÜÔºÅ„ÅÇ„Å™„Åü„ÅÆÊåáÂÖà„ÅØAI„Å®ÂêåÊúü„ÅóÂßã„ÇÅ„Å¶„ÅÑ„Çã„ÄÇ",
            "54Ê≠≥„ÅØÁµÇ„Çè„Çä„Åò„ÇÉ„Å™„ÅÑ„ÄÇ„Åì„Åì„Åã„Çâ„ÅåÊú¨ÂΩì„ÅÆ„Çπ„Çø„Éº„Éà„Å†„ÄÇ",
            "‰∫∫Áîü100Âπ¥ÊôÇ‰ª£„ÄÇ„ÅÇ„Å™„Åü„Å´„ÅØ„Åæ„Å†46Âπ¥„ÇÇ„ÅÇ„ÇãÔºÅ",
            "ÈÅÖ„Åô„Åé„Çã„Åì„Å®„Å™„Å©‰Ωï„ÇÇ„Å™„ÅÑ„ÄÇ‰ªäÊó•„Åå‰∫∫Áîü„Åß‰∏ÄÁï™Ëã•„ÅÑÊó•„Å†„ÄÇ",
            "Âπ¥ÈΩ¢„ÅØÊï∞Â≠ó„Å´ÈÅé„Åé„Å™„ÅÑ„ÄÇÊÉÖÁÜ±„Åì„Åù„ÅåÂÖ®„Å¶„ÇíÊ±∫„ÇÅ„Çã„ÄÇ",
            "54Âπ¥Èñì„ÅÆÁµåÈ®ì„Åå„ÄÅ‰ªä„Åì„ÅùÊúÄÂº∑„ÅÆÊ≠¶Âô®„Å´„Å™„Çã„ÄÇ",
            "‰ªäÊó•„ÅÆ1„Ç≥„Éü„ÉÉ„Éà„Åå„ÄÅ1Âπ¥Âæå„ÅÆ1000„Ç≥„Éü„ÉÉ„Éà„Å´„Å™„Çã„ÄÇ",
            "Á∂ôÁ∂ö„ÅØÂ§©Êâç„ÇíË∂Ö„Åà„Çã„ÄÇ„ÅÇ„Å™„Åü„ÅØÊØéÊó•ÈÄ≤Âåñ„Åó„Å¶„ÅÑ„Çã„ÄÇ",
            "Â∞è„Åï„Å™Á©ç„ÅøÈáç„Å≠„Åå„ÄÅ„ÇÑ„Åå„Å¶Â§ß„Åç„Å™Â±±„Å´„Å™„Çã„ÄÇ",
            "1Êó•30ÂàÜ„ÅÆÂ≠¶Áøí„Åå„ÄÅ1Âπ¥„Åß182ÊôÇÈñì„ÅÆÊàêÈï∑„ÇíÁîü„ÇÄ„ÄÇ",
            "Êò®Êó•„Çà„Çä1%ÊàêÈï∑„Åô„Çå„Å∞„ÄÅ1Âπ¥Âæå„Å´„ÅØ37ÂÄç„Å´„Å™„Çã„ÄÇ",
            "„Ç≥„Éº„Éâ„ÅØÊõ∏„Åè„Åü„Å≥„Å´‰∏äÊâã„Åè„Å™„Çã„ÄÇ‰ªäÊó•„ÇÇ‰∏ÄË°å„ÄÅÊõ∏„Åì„ÅÜ„ÄÇ",
            "„Ç®„É©„Éº„ÅØÊàêÈï∑„ÅÆ„ÉÅ„É£„É≥„Çπ„ÄÇ„Éá„Éê„ÉÉ„Ç∞Âäõ„Åì„Åù„ÅåÁúü„ÅÆÂÆüÂäõ„Å†„ÄÇ",
            "Git„ÅÆ„Ç≥„Éü„ÉÉ„Éà„É≠„Ç∞„Åå„ÄÅ„ÅÇ„Å™„Åü„ÅÆÊàêÈï∑„ÅÆË®º„Å†„ÄÇ",
            "Èñ¢Êï∞„ÅåÁêÜËß£„Åß„Åç„ÅüÁû¨Èñì„ÄÅ‰∏ñÁïå„ÅåÂ∫É„Åå„Çã„ÄÇ",
            "CSS‰∏Ä„Å§„Éû„Çπ„Çø„Éº„Åô„Çã„Åî„Å®„Å´„ÄÅË°®ÁèæÂäõ„Åå10ÂÄç„Å´„Å™„Çã„ÄÇ",
            "AI„ÅØÊïµ„Åò„ÇÉ„Å™„ÅÑ„ÄÇÊúÄÈ´ò„ÅÆÁõ∏Ê£í„Å†„ÄÇ",
            "„Éó„É≠„É≥„Éó„Éà„ÇíÂà∂„Åô„ÇãËÄÖ„Åå„ÄÅAIÊôÇ‰ª£„ÇíÂà∂„Åô„Çã„ÄÇ",
            "„ÅÇ„Å™„Åü„ÅØ„ÇÇ„ÅÜ„ÄÅAI„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„Éà„Å∏„ÅÆÈÅì„ÇíÊ≠©„ÅçÂßã„ÇÅ„Å¶„ÅÑ„Çã„ÄÇ",
            "AI„Å´‰Ωø„Çè„Çå„Çã„Å™„ÄÇAI„Çí‰Ωø„ÅÑ„Åì„Å™„Åõ„ÄÇ",
            "‰∏çÂÆâ„ÅØÊàêÈï∑„ÅÆË®º„ÄÇÊÄñ„ÅÑ„Åã„Çâ„Åì„Åù„ÄÅ‰æ°ÂÄ§„Åå„ÅÇ„Çã„ÄÇ",
            "Â§±Êïó„ÇíÊÅê„Çå„Çã„Å™„ÄÇ„Åù„Çå„ÅØÊàêÂäü„Å∏„ÅÆÈÄöÈÅéÁÇπ„Å†„ÄÇ",
            "‰ªäÊó•„ÅÆ„ÉÅ„É£„É¨„É≥„Ç∏„Åå„ÄÅÊòéÊó•„ÅÆËá™‰ø°„Å´„Å™„Çã„ÄÇ",
            "„É™„Çπ„ÇØ„ÇíÂèñ„Çâ„Å™„ÅÑ„Åì„Å®„Åå„ÄÅÊúÄÂ§ß„ÅÆ„É™„Çπ„ÇØ„Å†„ÄÇ",
            "ÂãáÊ∞ó„Å®„ÅØ„ÄÅÊÅêÊÄñ„Åå„Å™„ÅÑ„Åì„Å®„Åò„ÇÉ„Å™„ÅÑ„ÄÇÊÅêÊÄñ„Å®ÂÖ±„Å´ÈÄ≤„ÇÄ„Åì„Å®„Å†„ÄÇ",
            "Ëá™Â∑±ÊäïË≥á„ÅØ„ÄÅÂîØ‰∏ÄÁµ∂ÂØæ„Å´Ë£èÂàá„Çâ„Å™„ÅÑÊäïË≥á„Å†„ÄÇ",
            "Áü•Ë≠ò„Å®ÊäÄË°ì„ÅØ„ÄÅË™∞„Å´„ÇÇÂ•™„Åà„Å™„ÅÑË≤°Áî£„Å†„ÄÇ",
            "„ÅÇ„Å™„Åü„ÅÆÊåëÊà¶„Åå„ÄÅË™∞„Åã„ÅÆÂ∏åÊúõ„Å´„Å™„Çã„ÄÇ",
            "ÂÆ∂Êóè„ÅÆ„Åü„ÇÅ„Å´„ÄÅ„Åæ„ÅöËá™ÂàÜ„ÅåËºù„Åë„ÄÇ",
            "„ÅÇ„Å™„Åü„ÅÆËÉå‰∏≠„ÇíË¶ã„Å¶„ÄÅË™∞„Åã„ÅåÂãáÊ∞ó„Çí„ÇÇ„Çâ„Å£„Å¶„ÅÑ„Çã„ÄÇ",
            "ÂÆåÁíß„ÇíÁõÆÊåá„Åô„Å™„ÄÇÂÆåÊàê„ÇíÁõÆÊåá„Åõ„ÄÇ",
            "ÊØîËºÉ„Åô„Çã„Å™„Çâ„ÄÅÊò®Êó•„ÅÆËá™ÂàÜ„Å®„Å†„Åë„ÄÇ",
            "ÁÑ¶„Çâ„Å™„ÅÑ„ÄÇËá™ÂàÜ„ÅÆ„Éö„Éº„Çπ„Åß„ÄÅÁ¢∫ÂÆü„Å´„ÄÇ",
            "‰ºë„ÇÄ„Åì„Å®„ÇÇ„ÄÅÊàêÈï∑„ÅÆ‰∏ÄÈÉ®„Å†„ÄÇ",
            "Êúù„ÅÆ30ÂàÜ„ÅØ„ÄÅÂ§ú„ÅÆ2ÊôÇÈñì„Å´ÂåπÊïµ„Åô„Çã„ÄÇ",
            "ÈõÜ‰∏≠„ÅÆ15ÂàÜ„ÅØ„ÄÅ„ÉÄ„É©„ÉÄ„É©„ÅÆ3ÊôÇÈñì„ÇíË∂Ö„Åà„Çã„ÄÇ",
            "„Çø„Ç§„Éû„Éº„Çí„Çª„ÉÉ„Éà„Åó„Å¶„ÄÅ‰ªäÊó•„ÇÇÂÖ®Âäõ„ÅßÈßÜ„ÅëÊäú„Åë„Çç„ÄÇ",
            "ÊôÇÈñì„ÅØ‰Ωú„Çã„ÇÇ„ÅÆ„ÄÇÂæÖ„Å£„Å¶„ÅÑ„Å¶„ÇÇÊù•„Å™„ÅÑ„ÄÇ",
            "Expert-Reboot-54„ÄÅÈ†ÜË™ø„Å´Ëµ∑Âãï‰∏≠ÔºÅ",
            "‰ªäÊó•„ÅÆ„É≠„Ç∞„Åå„ÄÅÊú™Êù•„ÅÆË≥áÁî£„Å´„Å™„Çã„ÄÇ",
            "GitHub„ÅÆËçâ„ÇíËÇ≤„Å¶„Çã„Åì„Å®„Åå„ÄÅÁøíÊÖ£„ÇíËÇ≤„Å¶„Çã„ÄÇ",
            "ÂÜôÁµå„ÅØÊúÄÈ´ò„ÅÆÂ≠¶ÁøíÊ≥ï„ÄÇÊâã„ÇíÂãï„Åã„Åõ„Å∞„ÄÅÁêÜËß£„ÅåÊ∑±„Åæ„Çã„ÄÇ",
            "„Ç¢„Ç¶„Éà„Éó„ÉÉ„Éà„Åó„Å¶„Åì„Åù„ÄÅÁúü„ÅÆÁêÜËß£„ÅåÁîü„Åæ„Çå„Çã„ÄÇ",
            "„Åæ„ÅöÂãï„Åã„Åõ„ÄÇÊúÄÈÅ©Âåñ„ÅØ„Åù„ÅÆÂæå„Å†„ÄÇ",
            "„ÅÇ„Å™„Åü„ÅÆ„Ç≥„Éº„Éâ„Åå„ÄÅË™∞„Åã„ÅÆ‰∫∫Áîü„ÇíÂ§â„Åà„ÇãÊó•„ÅåÊù•„Çã„ÄÇ",
            "‰ΩôÁôΩ„ÅÆ„ÅÇ„Çã‰∫∫Áîü„Çí„ÄÅÊäÄË°ì„ÅßÂÆüÁèæ„Åó„Çà„ÅÜ„ÄÇ",
            "„ÅÇ„Å™„Åü„ÅÆÂ§¢„ÅØ„ÄÅÂøÖ„ÅöÂè∂„ÅÜ„ÄÇË´¶„ÇÅ„Å™„Åë„Çå„Å∞„ÄÇ",
            "‰ªäÊó•„ÇÇÂ≠¶„Åπ„Åü„Åì„Å®„Å´„ÄÅÊÑüË¨ù„Åó„Çà„ÅÜ„ÄÇ",
            "‰ªäÊó•„ÇÇËá™ÂàÜ„ÇíË§í„ÇÅ„Çà„ÅÜ„ÄÇ„Çà„Åè„ÇÑ„Å£„Å¶„ÅÑ„Çã„ÄÇ",
            "Ê•Ω„Åó„ÇÄ„Åì„Å®„ÇíÂøò„Çå„Çã„Å™„ÄÇÂ≠¶„Å≥„ÅØÂÜíÈô∫„Å†„ÄÇ",
            "„ÅÇ„Å™„Åü„ÅÆÁõÆÊ®ô„ÅØ„ÄÅÂøÖ„ÅöÂÆüÁèæ„Åô„Çã„ÄÇ‰ø°„ÅòÁ∂ö„Åë„Çç„ÄÇ"
        ];

        const yellBtn = document.getElementById('yellBtn');
        const yellMessage = document.getElementById('yellMessage');
        let lastYellIndex = -1;

        function showYell() {
            let idx;
            do {
                idx = Math.floor(Math.random() * yellMessages.length);
            } while (idx === lastYellIndex && yellMessages.length > 1);
            lastYellIndex = idx;

            // Êó¢„Å´„É°„ÉÉ„Çª„Éº„Ç∏„ÅåË°®Á§∫„Åï„Çå„Å¶„ÅÑ„Åü„Çâ„ÄÅ‰∏ä„Å∏Ê∂à„Åà„Å¶„Åã„ÇâÊñ∞„Åó„ÅÑ„ÇÇ„ÅÆ„ÇíÂá∫„Åô
            if (yellMessage.style.display === 'block') {
                yellMessage.style.animation = 'yellDisappear 0.4s ease-in forwards';
                setTimeout(() => {
                    yellMessage.textContent = yellMessages[idx];
                    yellMessage.style.animation = 'none';
                    setTimeout(() => {
                        yellMessage.style.animation = 'yellAppear 0.7s cubic-bezier(0.22, 1, 0.36, 1) forwards';
                    }, 10);
                }, 420);
            } else {
                yellMessage.textContent = yellMessages[idx];
                yellMessage.style.display = 'block';
                yellMessage.style.animation = 'none';
                setTimeout(() => {
                    yellMessage.style.animation = 'yellAppear 0.7s cubic-bezier(0.22, 1, 0.36, 1) forwards';
                }, 10);
            }
        }

        // „Éú„Çø„É≥„ÇØ„É™„ÉÉ„ÇØ„ÅßË°®Á§∫
        yellBtn.addEventListener('click', showYell);

        // 1ÂàÜ„Åî„Å®„Å´Ëá™Âãï„ÅßÂÖ•„ÇåÊõø„ÅàÔºàËµ∑Âãï1ÁßíÂæå„Å´ÂàùÂõûË°®Á§∫Ôºâ
        setTimeout(showYell, 1000);
        setInterval(showYell, 60 * 1000);

        // ===== DOMË¶ÅÁ¥† =====
        const timerDisplay = document.getElementById('timerDisplay');
        const progressBar = document.getElementById('progressBar');
        const timerCard = document.getElementById('timerCard');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const messageArea = document.getElementById('messageArea');
        const statusDot = document.getElementById('statusDot');
        const statusText = document.getElementById('statusText');
        const currentTimeEl = document.getElementById('currentTime');

        // ===== ÁèæÂú®ÊôÇÂàª„ÅÆÊõ¥Êñ∞ =====
        function updateCurrentTime() {
            const now = new Date();
            const h = String(now.getHours()).padStart(2, '0');
            const m = String(now.getMinutes()).padStart(2, '0');
            currentTimeEl.textContent = `${h}:${m}`;
        }
        updateCurrentTime();
        setInterval(updateCurrentTime, 1000);

        const adjustUp = document.getElementById('adjustUp');
        const adjustDown = document.getElementById('adjustDown');
        const adjustHint = document.getElementById('adjustHint');

        // ===== Áä∂ÊÖãÁÆ°ÁêÜ =====
        const initialRemaining = calcSecondsUntilDeadline();
        let totalSeconds = initialRemaining;
        let remainingSeconds = initialRemaining;
        let timerInterval = null;
        let isRunning = false;
        let warningShown = false;
        let finishShown = false;

        // ===== „Çø„Ç§„Éû„ÉºË°®Á§∫Êõ¥Êñ∞ =====
        function updateDisplay() {
            const hours = Math.floor(remainingSeconds / 3600);
            const minutes = Math.floor((remainingSeconds % 3600) / 60);
            const seconds = remainingSeconds % 60;

            timerDisplay.textContent =
                `${hours}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

            // „Éó„É≠„Ç∞„É¨„Çπ„Éê„ÉºÊõ¥Êñ∞
            const elapsed = totalSeconds - remainingSeconds;
            const progressPercent = totalSeconds > 0 ? (elapsed / totalSeconds) * 100 : 0;
            progressBar.style.width = progressPercent + '%';

            // ÊÆã„Çä15ÂàÜ„ÅÆË≠¶Âëä
            if (remainingSeconds <= WARNING_SECONDS && remainingSeconds > 0) {
                timerDisplay.classList.add('warning');
                timerCard.classList.add('warning');
                progressBar.classList.add('warning');
                statusDot.classList.remove('active');
                statusDot.classList.add('warning');
                statusText.textContent = '‚ö° „É©„Çπ„Éà„Çπ„Éë„Éº„ÉàÔºÅ';

                if (!warningShown) {
                    warningShown = true;
                    showMessage('üî• ÊúÄÂæå„ÅÆËøΩ„ÅÑËæº„ÅøÔºÅÊÆã„Çä15ÂàÜ„ÄÅÂÖ®Âäõ„ÅßÈßÜ„ÅëÊäú„Åë„ÇçÔºÅ', 'warning');
                }
            }

            // „Çø„Ç§„Éû„ÉºÁµÇ‰∫Ü
            if (remainingSeconds <= 0) {
                clearInterval(timerInterval);
                timerInterval = null;
                isRunning = false;
                timerDisplay.classList.remove('warning');
                timerDisplay.classList.add('finished');
                timerCard.classList.remove('warning');
                progressBar.classList.remove('warning');
                statusDot.classList.remove('warning', 'active');
                statusText.textContent = '‚úÖ ÂÆå‰∫Ü';
                startBtn.textContent = '‚ñ∂ „Çπ„Çø„Éº„Éà';
                startBtn.disabled = true;

                if (!finishShown) {
                    finishShown = true;
                    showMessage('üéâ „ÅäÁñ≤„Çå„Åï„Åæ„Åß„Åó„ÅüÔºÅ2ÊôÇÈñì„ÅÆÂ≠¶Áøí„ÄÅÂÆå‰∫Ü„Åß„ÅôÔºÅ', 'success');
                }
            }
        }

        // ===== „É°„ÉÉ„Çª„Éº„Ç∏Ë°®Á§∫ =====
        function showMessage(text, type = 'warning') {
            messageArea.innerHTML = '';
            const msgEl = document.createElement('div');
            msgEl.className = `message ${type}`;
            msgEl.textContent = text;
            messageArea.appendChild(msgEl);
        }

        // ===== „Çø„Ç§„Éû„ÉºÈñãÂßã/‰∏ÄÊôÇÂÅúÊ≠¢ =====
        function toggleTimer() {
            if (isRunning) {
                // ‰∏ÄÊôÇÂÅúÊ≠¢
                clearInterval(timerInterval);
                timerInterval = null;
                isRunning = false;
                startBtn.textContent = '‚ñ∂ ÂÜçÈñã';
                statusDot.classList.remove('active', 'warning');
                statusText.textContent = '‚è∏ ‰∏ÄÊôÇÂÅúÊ≠¢‰∏≠';
            } else {
                // ÈñãÂßã
                if (remainingSeconds <= 0) return;
                isRunning = true;
                startBtn.textContent = '‚è∏ ‰∏ÄÊôÇÂÅúÊ≠¢';
                statusDot.classList.add('active');
                if (remainingSeconds <= WARNING_SECONDS) {
                    statusDot.classList.remove('active');
                    statusDot.classList.add('warning');
                    statusText.textContent = '‚ö° „É©„Çπ„Éà„Çπ„Éë„Éº„ÉàÔºÅ';
                } else {
                    statusText.textContent = 'üìñ Â≠¶Áøí‰∏≠...';
                }

                timerInterval = setInterval(() => {
                    remainingSeconds--;
                    updateDisplay();
                }, 1000);
            }
        }

        // ===== „É™„Çª„ÉÉ„Éà =====
        function resetTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
            isRunning = false;
            warningShown = false;
            finishShown = false;

            // ÁèæÂú®ÊôÇÂàª„Åã„Çâ9:00„Åæ„Åß„ÇíÂÜçË®àÁÆó
            const recalc = calcSecondsUntilDeadline();
            totalSeconds = recalc;
            remainingSeconds = recalc;

            timerDisplay.classList.remove('warning', 'finished');
            timerCard.classList.remove('warning');
            progressBar.classList.remove('warning');
            statusDot.classList.remove('active', 'warning');
            statusText.textContent = 'ÂæÖÊ©ü‰∏≠';
            startBtn.textContent = '‚ñ∂ „Çπ„Çø„Éº„Éà';
            startBtn.disabled = false;
            messageArea.innerHTML = '';

            updateDisplay();

            // „Åæ„Å†9:00Ââç„Å™„ÇâËá™Âãï„Çπ„Çø„Éº„Éà
            if (recalc > 0) {
                autoStart();
            }
        }

        // ===== „Ç≥„Éº„Éí„ÉºË±Ü„ÅÆËÉåÊôØ„Éë„Éº„ÉÜ„Ç£„ÇØ„É´ÁîüÊàê =====
        function createCoffeeBeans() {
            const beanEmojis = ['‚òï', '‚ú¶', '‚Ä¢'];
            for (let i = 0; i < 12; i++) {
                const bean = document.createElement('div');
                bean.className = 'coffee-bean';
                bean.textContent = beanEmojis[Math.floor(Math.random() * beanEmojis.length)];
                bean.style.left = Math.random() * 100 + 'vw';
                bean.style.animationDuration = (Math.random() * 15 + 15) + 's';
                bean.style.animationDelay = (Math.random() * 20) + 's';
                bean.style.fontSize = (Math.random() * 1 + 0.8) + 'rem';
                document.body.appendChild(bean);
            }
        }

        // ===== ÊôÇÈñìË™øÊï¥ =====
        const STEP_NORMAL = 5 * 60;  // 5ÂàÜ
        const STEP_SHIFT = 1 * 60;   // 1ÂàÜ
        const MIN_SECONDS = 60;       // ÊúÄÂ∞è1ÂàÜ
        const MAX_SECONDS = 4 * 60 * 60; // ÊúÄÂ§ß4ÊôÇÈñì

        function adjustTime(delta) {
            // „Çø„Ç§„Éû„ÉºÂãï‰Ωú‰∏≠„ÅØË™øÊï¥‰∏çÂèØ
            if (isRunning) return;

            remainingSeconds = Math.max(MIN_SECONDS, Math.min(MAX_SECONDS, remainingSeconds + delta));
            totalSeconds = remainingSeconds;
            warningShown = false;
            finishShown = false;

            // ÁµÇ‰∫ÜÁä∂ÊÖã„Çí„ÇØ„É™„Ç¢
            timerDisplay.classList.remove('warning', 'finished');
            timerCard.classList.remove('warning');
            progressBar.classList.remove('warning');
            startBtn.disabled = false;
            if (!isRunning) {
                startBtn.textContent = '‚ñ∂ „Çπ„Çø„Éº„Éà';
                statusDot.classList.remove('warning', 'active');
                statusText.textContent = 'ÂæÖÊ©ü‰∏≠';
            }
            messageArea.innerHTML = '';

            updateDisplay();
            updateAdjustButtons();
        }

        function updateAdjustButtons() {
            adjustUp.classList.toggle('disabled', isRunning || remainingSeconds >= MAX_SECONDS);
            adjustDown.classList.toggle('disabled', isRunning || remainingSeconds <= MIN_SECONDS);
            adjustHint.classList.toggle('hidden', isRunning);
        }

        function flashButton(btn) {
            btn.classList.add('flash');
            setTimeout(() => btn.classList.remove('flash'), 150);
        }

        // ===== „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº =====
        startBtn.addEventListener('click', () => { toggleTimer(); updateAdjustButtons(); });
        resetBtn.addEventListener('click', () => { resetTimer(); updateAdjustButtons(); });

        adjustUp.addEventListener('click', () => {
            adjustTime(STEP_NORMAL);
            flashButton(adjustUp);
        });
        adjustDown.addEventListener('click', () => {
            adjustTime(-STEP_NORMAL);
            flashButton(adjustDown);
        });

        // „Ç≠„Éº„Éú„Éº„Éâ„Ç∑„Éß„Éº„Éà„Ç´„ÉÉ„Éà
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                if (!startBtn.disabled) { toggleTimer(); updateAdjustButtons(); }
            }
            if (e.code === 'KeyR' && !e.ctrlKey && !e.metaKey) {
                resetTimer();
                updateAdjustButtons();
            }
            if (e.code === 'ArrowUp') {
                e.preventDefault();
                const step = e.shiftKey ? STEP_SHIFT : STEP_NORMAL;
                adjustTime(step);
                flashButton(adjustUp);
            }
            if (e.code === 'ArrowDown') {
                e.preventDefault();
                const step = e.shiftKey ? STEP_SHIFT : STEP_NORMAL;
                adjustTime(-step);
                flashButton(adjustDown);
            }
        });

        // ===== Ëá™Âãï„Çπ„Çø„Éº„Éà =====
        function autoStart() {
            if (remainingSeconds <= 0 || isRunning) return;
            isRunning = true;
            startBtn.textContent = '‚è∏ ‰∏ÄÊôÇÂÅúÊ≠¢';
            statusDot.classList.add('active');
            if (remainingSeconds <= WARNING_SECONDS) {
                statusDot.classList.remove('active');
                statusDot.classList.add('warning');
                statusText.textContent = '‚ö° „É©„Çπ„Éà„Çπ„Éë„Éº„ÉàÔºÅ';
            } else {
                statusText.textContent = 'üìñ Â≠¶Áøí‰∏≠...';
            }
            timerInterval = setInterval(() => {
                remainingSeconds--;
                updateDisplay();
            }, 1000);
            updateAdjustButtons();
        }

        // ===== ÂàùÊúüÂåñ =====
        // ÈñãÂßãÊôÇÂàª„É©„Éô„É´„ÇíÁèæÂú®ÊôÇÂàª„ÅßË®≠ÂÆö
        (function setStartLabel() {
            const now = new Date();
            const h = now.getHours();
            const m = String(now.getMinutes()).padStart(2, '0');
            document.getElementById('startTimeLabel').textContent = `${h}:${m} START`;
        })();

        updateDisplay();
        updateAdjustButtons();
        createCoffeeBeans();

        // Ëµ∑ÂãïÊôÇ: 9:00Ââç„Å™„ÇâËá™Âãï„Ç´„Ç¶„É≥„Éà„ÉÄ„Ç¶„É≥ÈñãÂßã„ÄÅÈÅé„Åé„Å¶„ÅÑ„Åü„ÇâÂÆå‰∫ÜË°®Á§∫
        if (initialRemaining > 0) {
            autoStart();
        } else {
            timerDisplay.classList.add('finished');
            statusText.textContent = '‚úÖ ÂÆå‰∫Ü';
            startBtn.disabled = true;
            showMessage('üéâ Êú¨Êó•„ÅÆÂ≠¶ÁøíÊôÇÈñìÔºà„Äú9:00Ôºâ„ÅØÁµÇ‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅ', 'success');
        }

        // ===== „Éó„É´„Éà„Ç•„É™„Éï„É¨„ÉÉ„Ç∑„É• =====
        (function() {
            const ptr = document.getElementById('ptrIndicator');
            const ptrCup = document.getElementById('ptrCup');
            const ptrTextEl = document.getElementById('ptrText');
            const ptrBar = document.getElementById('ptrProgressBar');
            const maxH = 120;
            const readyH = 60;
            let startY = 0;
            let pulling = false;

            document.addEventListener('touchstart', (e) => {
                if (window.scrollY === 0) {
                    startY = e.touches[0].clientY;
                    pulling = true;
                    ptr.classList.add('active');
                    ptr.classList.remove('ready', 'refreshing');
                }
            }, { passive: true });

            document.addEventListener('touchmove', (e) => {
                if (!pulling) return;
                const dy = Math.max(0, e.touches[0].clientY - startY);
                const h = Math.min(dy * 0.5, maxH);
                ptr.style.height = h + 'px';

                // Âºï„Å£Âºµ„ÇäÂÖ∑Âêà„Å´Âøú„Åò„Å¶„Ç´„ÉÉ„Éó„Çí„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
                const progress = Math.min(h / readyH, 1);
                const scale = 0.8 + progress * 0.3;
                const opacity = 0.4 + progress * 0.6;
                const moveY = -10 + progress * 10;
                ptrCup.style.transform = `translateY(${moveY}px) scale(${scale})`;
                ptrCup.style.opacity = opacity;
                ptrBar.style.width = (progress * 100) + '%';

                if (h >= readyH) {
                    ptr.classList.add('ready');
                    ptrTextEl.textContent = '‚òï Èõ¢„Åó„Å¶Êõ¥Êñ∞';
                } else {
                    ptr.classList.remove('ready');
                    ptrTextEl.textContent = '‚Üì Âºï„Å£Âºµ„Å£„Å¶Êõ¥Êñ∞';
                }
            }, { passive: true });

            document.addEventListener('touchend', () => {
                if (!pulling) return;
                pulling = false;
                ptr.classList.remove('active');
                const h = parseInt(ptr.style.height) || 0;

                if (h >= readyH) {
                    ptr.classList.remove('ready');
                    ptr.classList.add('refreshing');
                    ptrCup.style.transform = '';
                    ptrCup.style.opacity = '1';
                    ptrTextEl.textContent = 'Êõ¥Êñ∞‰∏≠...';
                    ptr.style.height = '100px';
                    setTimeout(() => location.reload(), 800);
                } else {
                    ptrCup.style.transform = '';
                    ptrCup.style.opacity = '';
                    ptrBar.style.width = '0%';
                    ptr.style.height = '0';
                }
            }, { passive: true });
        })();

        // ===== Service Worker ÁôªÈå≤ =====
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js').catch(() => {});
        }
    </script>
</body>
</html>
